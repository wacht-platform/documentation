{
  "openapi": "3.1.0",
  "info": {
    "title": "Wacht Frontend API",
    "description": "Complete authentication and user management API for B2B applications",
    "version": "1.0.0",
    "license": {
      "name": "MIT"
    }
  },
  "servers": [
    {
      "url": "https://{deploymentHost}",
      "description": "Your deployment server",
      "variables": {
        "deploymentHost": {
          "default": "your-deployment.wacht.dev",
          "description": "Your Wacht deployment hostname"
        }
      }
    }
  ],
  "security": [
    {
      "cookieAuth": []
    },
    {
      "queryAuth": []
    }
  ],
  "tags": [
    {
      "name": "Authentication",
      "description": "Sign in, sign up, OAuth, and verification endpoints"
    },
    {
      "name": "Session",
      "description": "Session management and organization switching"
    },
    {
      "name": "User Management",
      "description": "User profile, email/phone management, and security settings"
    },
    {
      "name": "Organizations",
      "description": "Organization creation, member management, and roles"
    },
    {
      "name": "Workspaces",
      "description": "Workspace management within organizations"
    },
    {
      "name": "Deployment",
      "description": "Deployment configuration and metadata"
    },
    {
      "name": "Waitlist",
      "description": "Waitlist management"
    }
  ],
  "paths": {
    "/.well-known/meta": {
      "get": {
        "tags": ["Deployment"],
        "summary": "Get Deployment Metadata",
        "description": "Retrieve public metadata about the deployment configuration including authentication methods, UI settings, and feature flags.",
        "security": [],
        "responses": {
          "200": {
            "description": "Deployment UI settings retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "complete_ui_settings": {
                    "summary": "Complete UI Settings Configuration",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "deployment_id": 123,
                        "app_name": "Acme Corp Authentication",
                        "privacy_policy_url": "https://acme.com/privacy",
                        "tos_page_url": "https://acme.com/terms",
                        "sign_in_page_url": "/auth/signin",
                        "sign_up_page_url": "/auth/signup",
                        "waitlist_page_url": "/waitlist",
                        "support_page_url": "https://acme.com/support",
                        "after_logo_click_url": "https://acme.com",
                        "user_profile_url": "/profile",
                        "organization_profile_url": "/organization/settings",
                        "create_organization_url": "/organization/create",
                        "after_sign_out_one_page_url": "/",
                        "after_sign_out_all_page_url": "/",
                        "after_signup_redirect_url": "/dashboard",
                        "after_signin_redirect_url": "/dashboard",
                        "after_create_organization_redirect_url": "/organization/setup",
                        "favicon_image_url": "https://cdn.acme.com/favicon.ico",
                        "default_user_profile_image_url": "https://cdn.acme.com/default-avatar.png",
                        "default_organization_profile_image_url": "https://cdn.acme.com/default-org.png",
                        "default_workspace_profile_image_url": "https://cdn.acme.com/default-workspace.png",
                        "use_initials_for_user_profile_image": true,
                        "use_initials_for_organization_profile_image": true,
                        "logo_image_url": "https://cdn.acme.com/logo.svg",
                        "signup_terms_statement": "By signing up, you agree to our Terms of Service and Privacy Policy.",
                        "signup_terms_statement_shown": true,
                        "light_mode_settings": {
                          "primary_color": "#2563eb",
                          "background_color": "#ffffff",
                          "text_color": "#1f2937"
                        },
                        "dark_mode_settings": {
                          "primary_color": "#3b82f6",
                          "background_color": "#111827",
                          "text_color": "#f9fafb"
                        },
                        "created_at": "2024-01-01T00:00:00Z",
                        "updated_at": "2024-01-15T10:30:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/DeploymentNotFound"
          }
        }
      }
    },
    "/.well-known/jwk": {
      "get": {
        "tags": ["Deployment"],
        "summary": "Get JSON Web Key",
        "description": "Retrieve the public JSON Web Key used to verify JWT tokens issued by this deployment.",
        "security": [],
        "responses": {
          "200": {
            "description": "JWK retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "rsa_key": {
                    "summary": "RSA Public Key",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "keys": [
                          {
                            "kty": "RSA",
                            "use": "sig",
                            "kid": "deployment-123-key-1",
                            "alg": "RS256",
                            "n": "0vx7agoebGcQSuuPiLJXZptN9nndrQmbXEps2aiAFbWhM78LhWx4cbbfAAtVT86zwu1RK7aPFFxuhDR1L6tSoc_BJECPebWKRXjBZCiFV4n3oknjhMstn64tZ_2W-5JsGY4Hc5n9yBXArwl93lqt7_RN5w6Cf0h4QyQ5v-65YGjQR0_FDW2QvzqY368QQMicAtaSqzs8KJZgnYb9c7d0zgdAZHzu6qMQvRL5hajrn1n91CbOpbISD08qNLyrdkt-bFTWhAI4vMQFh6WeZu0fM4lFd2NcRwr3XPksINHaQ-G_xBniIqbw0Ls1jF44-csFCur-kEgU8awapJzKnqDKgw",
                            "e": "AQAB"
                          }
                        ]
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/DeploymentNotFound"
          }
        }
      }
    },
    "/auth/signin": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Sign In",
        "description": "Authenticate users with multiple strategies including email/password, username/password, phone OTP, email OTP, magic links, and social sign-on.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SignInRequest"
              },
              "examples": {
                "email_password": {
                  "summary": "Email and Password",
                  "value": {
                    "email": "user@example.com",
                    "password": "securePassword123!",
                    "strategy": "plain_email"
                  }
                },
                "username_password": {
                  "summary": "Username and Password",
                  "value": {
                    "username": "johndoe",
                    "password": "securePassword123!",
                    "strategy": "plain_username"
                  }
                },
                "phone_otp": {
                  "summary": "Phone OTP",
                  "value": {
                    "phone": "+1234567890",
                    "strategy": "phone_otp"
                  }
                },
                "email_otp": {
                  "summary": "Email OTP",
                  "value": {
                    "email": "user@example.com",
                    "strategy": "email_otp"
                  }
                },
                "magic_link": {
                  "summary": "Magic Link",
                  "value": {
                    "email": "user@example.com",
                    "strategy": "magic_link"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sign-in attempt created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "pending_verification": {
                    "summary": "Requires Email Verification",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "plain_email",
                            "current_step": "verify_email",
                            "completed": false,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "session": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "plain_email",
                            "current_step": "verify_email",
                            "completed": false,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  },
                  "completed_signin": {
                    "summary": "Authentication Complete",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "plain_email",
                            "completed": true,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [
                          {
                            "id": "987654321",
                            "user_id": "456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "987654321",
                          "user_id": "456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "plain_email",
                            "completed": true,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [
                          {
                            "id": "987654321",
                            "user_id": "456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "987654321",
                          "user_id": "456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  },
                  "pending_2fa": {
                    "summary": "Requires 2FA Verification",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "plain_email",
                            "current_step": "verify_second_factor",
                            "completed": false,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "session": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "plain_email",
                            "current_step": "verify_second_factor",
                            "completed": false,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationError"
          },
          "401": {
            "$ref": "#/components/responses/InvalidCredentials"
          },
          "403": {
            "$ref": "#/components/responses/AccountDisabled"
          }
        }
      }
    },
    "/auth/signup": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Sign Up",
        "description": "Register new users with email/username, password, and optional profile information. Supports email verification and phone verification workflows.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SignUpRequest"
              },
              "examples": {
                "basic_signup": {
                  "summary": "Basic Email Signup",
                  "value": {
                    "first_name": "John",
                    "last_name": "Doe",
                    "email": "john.doe@example.com",
                    "password": "SecurePass123!"
                  }
                },
                "full_profile": {
                  "summary": "Complete Profile Signup",
                  "value": {
                    "first_name": "Jane",
                    "last_name": "Smith",
                    "username": "janesmith",
                    "email": "jane.smith@example.com",
                    "phone_number": "+1234567890",
                    "password": "SecurePass123!"
                  }
                },
                "minimal_signup": {
                  "summary": "Minimal Required Fields",
                  "value": {
                    "email": "minimal@example.com",
                    "password": "SecurePass123!"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sign-up attempt created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "pending_email_verification": {
                    "summary": "Requires Email Verification",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [
                          {
                            "id": "signup_123456789",
                            "email": "john.doe@example.com",
                            "username": "johndoe",
                            "current_step": "verify_email",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "active_signin": null
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [
                          {
                            "id": "signup_123456789",
                            "email": "john.doe@example.com",
                            "username": "johndoe",
                            "current_step": "verify_email",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  },
                  "pending_phone_verification": {
                    "summary": "Requires Phone Verification",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [
                          {
                            "id": "signup_987654321",
                            "email": "jane.smith@example.com",
                            "username": "janesmith",
                            "current_step": "verify_phone",
                            "created_at": "2024-01-01T12:05:00Z"
                          }
                        ],
                        "active_signin": null
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [
                          {
                            "id": "signup_987654321",
                            "email": "jane.smith@example.com",
                            "username": "janesmith",
                            "current_step": "verify_phone",
                            "created_at": "2024-01-01T12:05:00Z"
                          }
                        ],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  },
                  "completed_signup": {
                    "summary": "Signup Complete",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_456789123",
                            "user_id": "user_789123456",
                            "created_at": "2024-01-01T12:10:00Z"
                          }
                        ],
                        "signup_attempts": [
                          {
                            "id": "signup_123456789",
                            "email": "minimal@example.com",
                            "current_step": "completed",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "active_signin": {
                          "id": "signin_456789123",
                          "user_id": "user_789123456",
                          "created_at": "2024-01-01T12:10:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_456789123",
                            "user_id": "user_789123456",
                            "created_at": "2024-01-01T12:10:00Z"
                          }
                        ],
                        "signup_attempts": [
                          {
                            "id": "signup_123456789",
                            "email": "minimal@example.com",
                            "current_step": "completed",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "active_signin": {
                          "id": "signin_456789123",
                          "user_id": "user_789123456",
                          "created_at": "2024-01-01T12:10:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "weak_password": {
                    "summary": "Password too weak",
                    "value": {
                      "status": 400,
                      "message": "Password validation failed",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "WEAK_PASSWORD",
                          "message": "Password must contain at least one number and one symbol"
                        }
                      ]
                    }
                  },
                  "invalid_email": {
                    "summary": "Invalid email format",
                    "value": {
                      "status": 400,
                      "message": "Field validation errors",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "VALIDATION_ERROR",
                          "message": "Invalid email format"
                        }
                      ]
                    }
                  },
                  "missing_required_fields": {
                    "summary": "Missing required fields",
                    "value": {
                      "status": 400,
                      "message": "Missing required fields",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "VALIDATION_ERROR",
                          "message": "Password is required"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "Conflict - User Already Exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "email_exists": {
                    "summary": "Email already registered",
                    "value": {
                      "status": 409,
                      "message": "User already exists",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "USER_EXISTS",
                          "message": "A user with this email already exists"
                        }
                      ]
                    }
                  },
                  "username_taken": {
                    "summary": "Username already taken",
                    "value": {
                      "status": 409,
                      "message": "Username not available",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "USERNAME_TAKEN",
                          "message": "This username is already taken"
                        }
                      ]
                    }
                  },
                  "phone_exists": {
                    "summary": "Phone number already registered",
                    "value": {
                      "status": 409,
                      "message": "Phone number already in use",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "PHONE_EXISTS",
                          "message": "A user with this phone number already exists"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/oauth2/init": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Initialize OAuth2 Flow",
        "description": "Start OAuth2 authentication flow with supported providers (Google, GitHub, Microsoft). Returns authorization URL for user redirection.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "provider": {
                    "type": "string",
                    "enum": ["google", "github", "microsoft"],
                    "description": "OAuth2 provider to authenticate with"
                  },
                  "redirect_url": {
                    "type": "string",
                    "description": "URL to redirect after OAuth completion (optional)"
                  }
                },
                "required": ["provider"]
              },
              "examples": {
                "google_oauth": {
                  "summary": "Google OAuth",
                  "value": {
                    "provider": "google"
                  }
                },
                "github_oauth": {
                  "summary": "GitHub OAuth",
                  "value": {
                    "provider": "github",
                    "redirect_url": "/dashboard"
                  }
                },
                "microsoft_oauth": {
                  "summary": "Microsoft OAuth",
                  "value": {
                    "provider": "microsoft"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OAuth2 authorization URL generated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "google_auth_url": {
                    "summary": "Google Authorization URL",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "authorization_url": "https://accounts.google.com/oauth/authorize?client_id=example&redirect_uri=https%3A%2F%2Fyour-deployment.wacht.dev%2Fauth%2Foauth2%2Fcallback&response_type=code&scope=openid+email+profile&state=oauth_state_token_123",
                        "state": "oauth_state_token_123"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  },
                  "github_auth_url": {
                    "summary": "GitHub Authorization URL",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "authorization_url": "https://github.com/login/oauth/authorize?client_id=example&redirect_uri=https%3A%2F%2Fyour-deployment.wacht.dev%2Fauth%2Foauth2%2Fcallback&scope=user%3Aemail&state=oauth_state_token_456",
                        "state": "oauth_state_token_456"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid Provider",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_provider": {
                    "summary": "Unsupported OAuth provider",
                    "value": {
                      "status": 400,
                      "message": "Invalid OAuth provider",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "INVALID_PROVIDER",
                          "message": "Provider 'invalid' is not supported"
                        }
                      ]
                    }
                  },
                  "provider_not_configured": {
                    "summary": "Provider not configured",
                    "value": {
                      "status": 400,
                      "message": "OAuth provider not configured",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "PROVIDER_NOT_CONFIGURED",
                          "message": "Google OAuth is not configured for this deployment"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/oauth2/callback": {
      "get": {
        "tags": ["Authentication"],
        "summary": "OAuth2 Callback",
        "description": "Handle OAuth2 callback from providers. Processes authorization code and completes authentication flow.",
        "parameters": [
          {
            "name": "code",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Authorization code from OAuth provider"
          },
          {
            "name": "state",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "State parameter for CSRF protection"
          },
          {
            "name": "error",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Error parameter if OAuth failed"
          }
        ],
        "responses": {
          "200": {
            "description": "OAuth authentication completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "oauth_success": {
                    "summary": "OAuth Authentication Success",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "sso",
                            "completed": true,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [
                          {
                            "id": "987654321",
                            "user_id": "456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "987654321",
                          "user_id": "456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "sso",
                            "completed": true,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [
                          {
                            "id": "987654321",
                            "user_id": "456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "987654321",
                          "user_id": "456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  },
                  "oauth_with_redirect": {
                    "summary": "OAuth Success with Custom Redirect",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "sso",
                            "completed": true,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [
                          {
                            "id": "987654321",
                            "user_id": "456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "987654321",
                          "user_id": "456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        },
                        "redirect_uri": "/dashboard"
                      },
                      "session": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "sso",
                            "completed": true,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [
                          {
                            "id": "987654321",
                            "user_id": "456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "987654321",
                          "user_id": "456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - OAuth Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "missing_code": {
                    "summary": "Missing authorization code",
                    "value": {
                      "status": 400,
                      "message": "code is not present in uri",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "CODE_REQUIRED",
                          "message": "Authorization code is required"
                        }
                      ]
                    }
                  },
                  "invalid_state": {
                    "summary": "Invalid state parameter",
                    "value": {
                      "status": 400,
                      "message": "Invalid state format",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "INVALID_STATE",
                          "message": "OAuth state parameter is invalid or expired"
                        }
                      ]
                    }
                  },
                  "expired_attempt": {
                    "summary": "Expired authentication attempt",
                    "value": {
                      "status": 400,
                      "message": "Authentication attempt has expired",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "INVALID_STATE",
                          "message": "Authentication attempt has expired after 10 minutes"
                        }
                      ]
                    }
                  },
                  "provider_not_configured": {
                    "summary": "OAuth provider not configured",
                    "value": {
                      "status": 400,
                      "message": "Google OAuth is not configured for this deployment",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "PROVIDER_NOT_CONFIGURED",
                          "message": "OAuth provider configuration is missing or invalid"
                        }
                      ]
                    }
                  },
                  "invalid_authorization_code": {
                    "summary": "Invalid authorization code",
                    "value": {
                      "status": 400,
                      "message": "Failed to exchange code for token",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "INVALID_CODE",
                          "message": "Authorization code is invalid or has been used"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "user_info_error": {
                    "summary": "Failed to get user info",
                    "value": {
                      "status": 500,
                      "message": "Failed to get user info",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": null
                    }
                  },
                  "session_save_error": {
                    "summary": "Failed to save session",
                    "value": {
                      "status": 500,
                      "message": "Failed to save session",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": null
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/complete-profile": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Complete User Profile",
        "description": "Complete missing profile information after OAuth or partial signup. Updates user profile with required fields.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "first_name": {
                    "type": "string",
                    "description": "User's first name"
                  },
                  "last_name": {
                    "type": "string",
                    "description": "User's last name"
                  },
                  "username": {
                    "type": "string",
                    "description": "Unique username"
                  },
                  "phone_number": {
                    "type": "string",
                    "description": "Phone number with country code"
                  }
                }
              },
              "examples": {
                "complete_name": {
                  "summary": "Complete Name Fields",
                  "value": {
                    "first_name": "John",
                    "last_name": "Doe"
                  }
                },
                "complete_all": {
                  "summary": "Complete All Fields",
                  "value": {
                    "first_name": "Jane",
                    "last_name": "Smith",
                    "username": "janesmith",
                    "phone_number": "+1234567890"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "profile_completed": {
                    "summary": "Profile Completion Success",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "sso",
                            "completed": true,
                            "requires_completion": false,
                            "missing_fields": [],
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [
                          {
                            "id": "987654321",
                            "user_id": "456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "987654321",
                          "user_id": "456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "sso",
                            "completed": true,
                            "requires_completion": false,
                            "missing_fields": [],
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [
                          {
                            "id": "987654321",
                            "user_id": "456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "987654321",
                          "user_id": "456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "missing_required": {
                    "summary": "Missing required fields",
                    "value": {
                      "status": 400,
                      "message": "Missing required profile fields",
                      "data": null,
                      "session": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "sso",
                            "completed": false,
                            "requires_completion": true,
                            "missing_fields": ["first_name", "last_name"],
                            "required_fields": [
                              "first_name",
                              "last_name",
                              "username"
                            ],
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "MISSING_REQUIRED_FIELDS",
                          "message": "First name and last name are required"
                        }
                      ]
                    }
                  },
                  "username_taken": {
                    "summary": "Username not available",
                    "value": {
                      "status": 400,
                      "message": "Username validation error",
                      "data": null,
                      "session": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "sso",
                            "completed": false,
                            "requires_completion": true,
                            "missing_fields": ["username"],
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "USERNAME_TAKEN",
                          "message": "This username is already taken"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - No Active Signin Attempt",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "no_signin_attempt": {
                    "summary": "No signin attempt to complete",
                    "value": {
                      "status": 401,
                      "message": "No signin attempt found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NO_SIGNIN_ATTEMPT",
                          "message": "No signin attempt found that requires profile completion"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/identifier-availability": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Check Identifier Availability",
        "description": "Check if an email address or username is available for registration. Returns availability status without creating an account.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email address to check"
                  },
                  "username": {
                    "type": "string",
                    "description": "Username to check"
                  }
                }
              },
              "examples": {
                "check_email": {
                  "summary": "Check Email Availability",
                  "value": {
                    "email": "newuser@example.com"
                  }
                },
                "check_username": {
                  "summary": "Check Username Availability",
                  "value": {
                    "username": "newusername"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Availability check completed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "email_available": {
                    "summary": "Email Available",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "available": true,
                        "identifier_type": "email",
                        "identifier": "newuser@example.com"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  },
                  "email_taken": {
                    "summary": "Email Taken",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "available": false,
                        "identifier_type": "email",
                        "identifier": "existing@example.com"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  },
                  "username_available": {
                    "summary": "Username Available",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "available": true,
                        "identifier_type": "username",
                        "identifier": "newusername"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  },
                  "username_taken": {
                    "summary": "Username Taken",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "available": false,
                        "identifier_type": "username",
                        "identifier": "existinguser"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "missing_identifier": {
                    "summary": "No identifier provided",
                    "value": {
                      "status": 400,
                      "message": "Missing identifier",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "MISSING_IDENTIFIER",
                          "message": "Either email or username must be provided"
                        }
                      ]
                    }
                  },
                  "invalid_email": {
                    "summary": "Invalid email format",
                    "value": {
                      "status": 400,
                      "message": "Invalid email format",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "INVALID_EMAIL",
                          "message": "Invalid email format"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/prepare-verification": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Prepare Verification",
        "description": "Send verification code via email or SMS for authentication. Used during signin attempts and profile verification.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "signin_attempt_id": {
                    "type": "string",
                    "description": "ID of the signin attempt to verify"
                  },
                  "signup_attempt_id": {
                    "type": "string",
                    "description": "ID of the signup attempt to verify"
                  },
                  "method": {
                    "type": "string",
                    "enum": ["email", "sms"],
                    "description": "Verification method to use"
                  }
                },
                "required": ["method"]
              },
              "examples": {
                "email_verification": {
                  "summary": "Send Email Verification",
                  "value": {
                    "signin_attempt_id": "123456789",
                    "method": "email"
                  }
                },
                "sms_verification": {
                  "summary": "Send SMS Verification",
                  "value": {
                    "signup_attempt_id": "987654321",
                    "method": "sms"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Verification code sent successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "email_sent": {
                    "summary": "Email Verification Sent",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "email_otp",
                            "current_step": "verify_email_otp",
                            "completed": false,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "session": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "email_otp",
                            "current_step": "verify_email_otp",
                            "completed": false,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  },
                  "sms_sent": {
                    "summary": "SMS Verification Sent",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [
                          {
                            "id": "987654321",
                            "email": "user@example.com",
                            "current_step": "verify_phone",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "active_signin": null
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [
                          {
                            "id": "987654321",
                            "email": "user@example.com",
                            "current_step": "verify_phone",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_attempt": {
                    "summary": "Invalid signin/signup attempt",
                    "value": {
                      "status": 400,
                      "message": "Invalid attempt ID",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "INVALID_ATTEMPT",
                          "message": "Signin attempt not found or already completed"
                        }
                      ]
                    }
                  },
                  "missing_contact_info": {
                    "summary": "Missing email or phone",
                    "value": {
                      "status": 400,
                      "message": "Missing contact information",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "MISSING_CONTACT_INFO",
                          "message": "No email address found for email verification"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate Limited",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "rate_limited": {
                    "summary": "Too many verification attempts",
                    "value": {
                      "status": 429,
                      "message": "Rate limit exceeded",
                      "data": null,
                      "session": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "email_otp",
                            "current_step": "verify_email_otp",
                            "completed": false,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "RATE_LIMIT_EXCEEDED",
                          "message": "Too many verification attempts. Please wait 60 seconds before trying again."
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/attempt-verification": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Attempt Verification",
        "description": "Verify authentication code from email or SMS. Completes the verification step for signin or signup attempts.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "signin_attempt_id": {
                    "type": "string",
                    "description": "ID of the signin attempt to verify"
                  },
                  "signup_attempt_id": {
                    "type": "string",
                    "description": "ID of the signup attempt to verify"
                  },
                  "code": {
                    "type": "string",
                    "description": "Verification code from email or SMS"
                  }
                },
                "required": ["code"]
              },
              "examples": {
                "signin_verification": {
                  "summary": "Verify Signin Code",
                  "value": {
                    "signin_attempt_id": "123456789",
                    "code": "123456"
                  }
                },
                "signup_verification": {
                  "summary": "Verify Signup Code",
                  "value": {
                    "signup_attempt_id": "987654321",
                    "code": "654321"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Verification completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "signin_completed": {
                    "summary": "Signin Verification Success",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "email_otp",
                            "completed": true,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [
                          {
                            "id": "987654321",
                            "user_id": "456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "987654321",
                          "user_id": "456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "email_otp",
                            "completed": true,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [
                          {
                            "id": "987654321",
                            "user_id": "456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "987654321",
                          "user_id": "456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  },
                  "signup_completed": {
                    "summary": "Signup Verification Success",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_456789123",
                            "user_id": "user_789123456",
                            "created_at": "2024-01-01T12:05:00Z"
                          }
                        ],
                        "signup_attempts": [
                          {
                            "id": "987654321",
                            "email": "user@example.com",
                            "current_step": "completed",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "active_signin": {
                          "id": "signin_456789123",
                          "user_id": "user_789123456",
                          "created_at": "2024-01-01T12:05:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_456789123",
                            "user_id": "user_789123456",
                            "created_at": "2024-01-01T12:05:00Z"
                          }
                        ],
                        "signup_attempts": [
                          {
                            "id": "987654321",
                            "email": "user@example.com",
                            "current_step": "completed",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "active_signin": {
                          "id": "signin_456789123",
                          "user_id": "user_789123456",
                          "created_at": "2024-01-01T12:05:00Z"
                        }
                      },
                      "errors": []
                    }
                  },
                  "requires_2fa": {
                    "summary": "2FA Required",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "email_otp",
                            "current_step": "verify_second_factor",
                            "completed": false,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "session": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "email_otp",
                            "current_step": "verify_second_factor",
                            "completed": false,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid Code",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_code": {
                    "summary": "Incorrect verification code",
                    "value": {
                      "status": 400,
                      "message": "Invalid verification code",
                      "data": null,
                      "session": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "email_otp",
                            "current_step": "verify_email_otp",
                            "completed": false,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "INVALID_CODE",
                          "message": "The verification code is incorrect"
                        }
                      ]
                    }
                  },
                  "expired_code": {
                    "summary": "Verification code expired",
                    "value": {
                      "status": 400,
                      "message": "Verification code expired",
                      "data": null,
                      "session": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "email_otp",
                            "current_step": "verify_email_otp",
                            "completed": false,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "EXPIRED_CODE",
                          "message": "The verification code has expired. Please request a new one."
                        }
                      ]
                    }
                  },
                  "invalid_attempt": {
                    "summary": "Invalid attempt ID",
                    "value": {
                      "status": 400,
                      "message": "Invalid attempt",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "INVALID_ATTEMPT",
                          "message": "Signin attempt not found or already completed"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Too Many Attempts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "too_many_attempts": {
                    "summary": "Too many failed attempts",
                    "value": {
                      "status": 429,
                      "message": "Too many attempts",
                      "data": null,
                      "session": {
                        "signin_attempts": [
                          {
                            "id": "123456789",
                            "method": "email_otp",
                            "current_step": "verify_email_otp",
                            "completed": false,
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "TOO_MANY_ATTEMPTS",
                          "message": "Too many failed verification attempts. Please wait 5 minutes before trying again."
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/verify-magic-link": {
      "get": {
        "tags": ["Authentication"],
        "summary": "Verify Magic Link",
        "description": "Complete authentication using magic link token from email. Processes the magic link and signs in the user.",
        "parameters": [
          {
            "name": "token",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Magic link verification token"
          }
        ],
        "responses": {
          "302": {
            "description": "Redirect after magic link verification",
            "headers": {
              "Location": {
                "description": "Redirect URL",
                "schema": {
                  "type": "string"
                }
              }
            },
            "content": {
              "application/json": {
                "examples": {
                  "success_redirect": {
                    "summary": "Magic Link Success - Redirect to Dashboard",
                    "value": "Redirects to /dashboard after successful magic link authentication with session cookie set"
                  },
                  "profile_completion": {
                    "summary": "Profile Completion Required",
                    "value": "Redirects to /auth/complete-profile when user needs to complete missing profile fields"
                  },
                  "error_redirect": {
                    "summary": "Magic Link Error - Redirect to Signin",
                    "value": "Redirects to /auth/signin?error=invalid_token when magic link is invalid or expired"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid Token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_token": {
                    "summary": "Invalid magic link token",
                    "value": {
                      "status": 400,
                      "message": "Invalid magic link token",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "INVALID_TOKEN",
                          "message": "The magic link token is invalid or malformed"
                        }
                      ]
                    }
                  },
                  "expired_token": {
                    "summary": "Expired magic link token",
                    "value": {
                      "status": 400,
                      "message": "Magic link expired",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "EXPIRED_TOKEN",
                          "message": "The magic link has expired. Please request a new one."
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/forgot-password": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Forgot Password",
        "description": "Initiate password reset flow by sending reset link to user's email address.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email address to send password reset link"
                  }
                },
                "required": ["email"]
              },
              "examples": {
                "password_reset": {
                  "summary": "Request Password Reset",
                  "value": {
                    "email": "user@example.com"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset email sent (always returns success for security)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "reset_email_sent": {
                    "summary": "Password Reset Email Sent",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "message": "If an account with this email exists, a password reset link has been sent."
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_email": {
                    "summary": "Invalid email format",
                    "value": {
                      "status": 400,
                      "message": "Invalid email format",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "INVALID_EMAIL",
                          "message": "Invalid email format"
                        }
                      ]
                    }
                  },
                  "missing_email": {
                    "summary": "Missing email field",
                    "value": {
                      "status": 400,
                      "message": "Missing required field",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "VALIDATION_ERROR",
                          "message": "Email is required"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate Limited",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "rate_limited": {
                    "summary": "Too many reset requests",
                    "value": {
                      "status": 429,
                      "message": "Rate limit exceeded",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "RATE_LIMIT_EXCEEDED",
                          "message": "Too many password reset requests. Please wait 1 hour before trying again."
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/reset-password": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Reset Password",
        "description": "Complete password reset using reset token from email and new password.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "token": {
                    "type": "string",
                    "description": "Password reset token from email"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 6,
                    "maxLength": 125,
                    "description": "New password (6-125 characters, must contain number and symbol)"
                  }
                },
                "required": ["token", "password"]
              },
              "examples": {
                "reset_password": {
                  "summary": "Reset Password with Token",
                  "value": {
                    "token": "reset_token_abc123def456",
                    "password": "NewSecurePass123!"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "password_reset_success": {
                    "summary": "Password Reset Success",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "message": "Password has been reset successfully. You can now sign in with your new password."
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_token": {
                    "summary": "Invalid reset token",
                    "value": {
                      "status": 400,
                      "message": "Invalid reset token",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "INVALID_TOKEN",
                          "message": "The password reset token is invalid or has expired"
                        }
                      ]
                    }
                  },
                  "weak_password": {
                    "summary": "Password too weak",
                    "value": {
                      "status": 400,
                      "message": "Password validation failed",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "WEAK_PASSWORD",
                          "message": "Password must contain at least one number and one symbol"
                        }
                      ]
                    }
                  },
                  "expired_token": {
                    "summary": "Expired reset token",
                    "value": {
                      "status": 400,
                      "message": "Reset token expired",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "EXPIRED_TOKEN",
                          "message": "The password reset token has expired. Please request a new one."
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/session": {
      "get": {
        "tags": ["Session"],
        "summary": "Get Current Session",
        "description": "Retrieve current session information including active signin, user data, and session state.",
        "responses": {
          "200": {
            "description": "Session information retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "authenticated_session": {
                    "summary": "Authenticated User Session",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "user": {
                          "id": "user_456789123",
                          "first_name": "John",
                          "last_name": "Doe",
                          "email": "john.doe@example.com",
                          "username": "johndoe",
                          "image_url": "https://cdn.example.com/avatars/johndoe.jpg",
                          "created_at": "2024-01-01T00:00:00Z",
                          "updated_at": "2024-01-15T10:30:00Z"
                        },
                        "organization": {
                          "id": "org_123456789",
                          "name": "Acme Corporation",
                          "slug": "acme-corp",
                          "image_url": "https://cdn.example.com/orgs/acme.jpg"
                        },
                        "workspace": {
                          "id": "workspace_987654321",
                          "name": "Development Team",
                          "slug": "dev-team"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  },
                  "unauthenticated_session": {
                    "summary": "Unauthenticated Session",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "user": null,
                        "organization": null,
                        "workspace": null
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/session/sign-out": {
      "post": {
        "tags": ["Session"],
        "summary": "Sign Out",
        "description": "Sign out the current user session. Optionally sign out from all sessions.",
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "all_sessions": {
                    "type": "boolean",
                    "description": "Whether to sign out from all sessions (default: false)"
                  }
                }
              },
              "examples": {
                "current_session": {
                  "summary": "Sign Out Current Session",
                  "value": {
                    "all_sessions": false
                  }
                },
                "all_sessions": {
                  "summary": "Sign Out All Sessions",
                  "value": {
                    "all_sessions": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sign out completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "signout_success": {
                    "summary": "Sign Out Success",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "message": "Successfully signed out"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  },
                  "signout_all_success": {
                    "summary": "Sign Out All Sessions Success",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "message": "Successfully signed out from all sessions"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User is not signed in"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/session/token": {
      "get": {
        "tags": ["Session"],
        "summary": "Get Session Token",
        "description": "Generate a JWT token for the current session. Used for API authentication.",
        "responses": {
          "200": {
            "description": "JWT token generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "token_generated": {
                    "summary": "JWT Token Generated",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "token": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyXzQ1Njc4OTEyMyIsImlhdCI6MTYwOTQ1OTIwMCwiZXhwIjoxNjA5NDYyODAwfQ.signature_here",
                        "expires_at": "2024-01-01T13:00:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to generate a token"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/session/switch-sign-in": {
      "post": {
        "tags": ["Session"],
        "summary": "Switch Active Sign In",
        "description": "Switch to a different active signin session. Used when user has multiple concurrent sessions.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "signin_id": {
                    "type": "string",
                    "description": "ID of the signin session to switch to"
                  }
                },
                "required": ["signin_id"]
              },
              "examples": {
                "switch_signin": {
                  "summary": "Switch to Different Signin",
                  "value": {
                    "signin_id": "signin_123456789"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully switched signin session",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "switch_success": {
                    "summary": "Switch Signin Success",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_123456789",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T10:00:00Z"
                          },
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_123456789",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T10:00:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_123456789",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T10:00:00Z"
                          },
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_123456789",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T10:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid signin ID",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_signin": {
                    "summary": "Invalid signin ID",
                    "value": {
                      "status": 400,
                      "message": "Invalid signin session",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_SIGNIN",
                          "message": "Signin session not found or does not belong to current user"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to switch sessions"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/session/switch-organization": {
      "post": {
        "tags": ["Session"],
        "summary": "Switch Active Organization",
        "description": "Switch to a different organization context. Updates session to use the specified organization.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "organization_id": {
                    "type": "string",
                    "description": "ID of the organization to switch to"
                  }
                },
                "required": ["organization_id"]
              },
              "examples": {
                "switch_organization": {
                  "summary": "Switch to Different Organization",
                  "value": {
                    "organization_id": "org_987654321"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully switched organization",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "switch_success": {
                    "summary": "Switch Organization Success",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "organization": {
                          "id": "org_987654321",
                          "name": "Tech Startup Inc",
                          "slug": "tech-startup",
                          "image_url": "https://cdn.example.com/orgs/tech-startup.jpg"
                        },
                        "workspace": {
                          "id": "workspace_default",
                          "name": "General",
                          "slug": "general"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid organization",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_organization": {
                    "summary": "Invalid organization ID",
                    "value": {
                      "status": 400,
                      "message": "Invalid organization",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_ORGANIZATION",
                          "message": "Organization not found or user is not a member"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to switch organizations"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/session/switch-workspace": {
      "post": {
        "tags": ["Session"],
        "summary": "Switch Active Workspace",
        "description": "Switch to a different workspace within the current organization. Updates session workspace context.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspace_id": {
                    "type": "string",
                    "description": "ID of the workspace to switch to"
                  }
                },
                "required": ["workspace_id"]
              },
              "examples": {
                "switch_workspace": {
                  "summary": "Switch to Different Workspace",
                  "value": {
                    "workspace_id": "workspace_456789123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully switched workspace",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "switch_success": {
                    "summary": "Switch Workspace Success",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "workspace": {
                          "id": "workspace_456789123",
                          "name": "Marketing Team",
                          "slug": "marketing-team"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid workspace",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_workspace": {
                    "summary": "Invalid workspace ID",
                    "value": {
                      "status": 400,
                      "message": "Invalid workspace",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_WORKSPACE",
                          "message": "Workspace not found or user does not have access"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to switch workspaces"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/deployment": {
      "get": {
        "tags": ["Deployment"],
        "summary": "Get Deployment Information",
        "description": "Retrieve deployment configuration and settings. Requires authentication to access detailed deployment data.",
        "responses": {
          "200": {
            "description": "Deployment information retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "deployment_info": {
                    "summary": "Deployment Configuration",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "id": 123,
                        "name": "Acme Corp Production",
                        "hostname": "auth.acme.com",
                        "environment": "production",
                        "features": {
                          "oauth_google": true,
                          "oauth_github": true,
                          "oauth_microsoft": false,
                          "phone_verification": true,
                          "magic_links": true,
                          "two_factor_auth": true
                        },
                        "ui_settings": {
                          "app_name": "Acme Corp Authentication",
                          "logo_image_url": "https://cdn.acme.com/logo.svg",
                          "primary_color": "#2563eb",
                          "background_color": "#ffffff"
                        },
                        "created_at": "2024-01-01T00:00:00Z",
                        "updated_at": "2024-01-15T10:30:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Authentication required",
                    "value": {
                      "status": 401,
                      "message": "Authentication required",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to access deployment information"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me": {
      "get": {
        "tags": ["User Management"],
        "summary": "Get Current User Profile",
        "description": "Retrieve the current authenticated user's profile information including personal details and preferences.",
        "responses": {
          "200": {
            "description": "User profile retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "user_profile": {
                    "summary": "Complete User Profile",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "id": "user_456789123",
                        "first_name": "John",
                        "last_name": "Doe",
                        "username": "johndoe",
                        "email": "john.doe@example.com",
                        "phone_number": "+1234567890",
                        "image_url": "https://cdn.example.com/avatars/johndoe.jpg",
                        "two_factor_enabled": true,
                        "email_verified": true,
                        "phone_verified": true,
                        "created_at": "2024-01-01T00:00:00Z",
                        "updated_at": "2024-01-15T10:30:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to access profile"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["User Management"],
        "summary": "Update User Profile",
        "description": "Update the current user's profile information including name, username, and other personal details.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "first_name": {
                    "type": "string",
                    "description": "User's first name"
                  },
                  "last_name": {
                    "type": "string",
                    "description": "User's last name"
                  },
                  "username": {
                    "type": "string",
                    "description": "Unique username"
                  }
                }
              },
              "examples": {
                "update_name": {
                  "summary": "Update Name",
                  "value": {
                    "first_name": "Jane",
                    "last_name": "Smith"
                  }
                },
                "update_username": {
                  "summary": "Update Username",
                  "value": {
                    "username": "janesmith2024"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "profile_updated": {
                    "summary": "Profile Update Success",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "id": "user_456789123",
                        "first_name": "Jane",
                        "last_name": "Smith",
                        "username": "janesmith2024",
                        "email": "jane.smith@example.com",
                        "phone_number": "+1234567890",
                        "image_url": "https://cdn.example.com/avatars/janesmith.jpg",
                        "two_factor_enabled": true,
                        "email_verified": true,
                        "phone_verified": true,
                        "created_at": "2024-01-01T00:00:00Z",
                        "updated_at": "2024-01-15T15:45:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "username_taken": {
                    "summary": "Username already taken",
                    "value": {
                      "status": 400,
                      "message": "Username not available",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "USERNAME_TAKEN",
                          "message": "This username is already taken"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to update profile"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/organization-memberships": {
      "get": {
        "tags": ["User Management"],
        "summary": "Get User's Organization Memberships",
        "description": "Retrieve all organizations the current user is a member of, including roles and permissions.",
        "responses": {
          "200": {
            "description": "Organization memberships retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "memberships": {
                    "summary": "Organization Memberships",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": [
                        {
                          "id": "membership_123456789",
                          "organization": {
                            "id": "org_123456789",
                            "name": "Acme Corporation",
                            "slug": "acme-corp",
                            "image_url": "https://cdn.example.com/orgs/acme.jpg"
                          },
                          "role": {
                            "id": "role_admin",
                            "name": "Administrator",
                            "permissions": ["read", "write", "admin"]
                          },
                          "created_at": "2024-01-01T00:00:00Z",
                          "updated_at": "2024-01-15T10:30:00Z"
                        },
                        {
                          "id": "membership_987654321",
                          "organization": {
                            "id": "org_987654321",
                            "name": "Tech Startup Inc",
                            "slug": "tech-startup",
                            "image_url": "https://cdn.example.com/orgs/tech-startup.jpg"
                          },
                          "role": {
                            "id": "role_member",
                            "name": "Member",
                            "permissions": ["read", "write"]
                          },
                          "created_at": "2024-01-10T00:00:00Z",
                          "updated_at": "2024-01-10T00:00:00Z"
                        }
                      ],
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to view memberships"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/workspace-memberships": {
      "get": {
        "tags": ["User Management"],
        "summary": "Get User's Workspace Memberships",
        "description": "Retrieve all workspaces the current user has access to across all organizations.",
        "responses": {
          "200": {
            "description": "Workspace memberships retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "workspace_memberships": {
                    "summary": "Workspace Memberships",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": [
                        {
                          "id": "ws_membership_123456789",
                          "workspace": {
                            "id": "workspace_987654321",
                            "name": "Development Team",
                            "slug": "dev-team",
                            "organization": {
                              "id": "org_123456789",
                              "name": "Acme Corporation",
                              "slug": "acme-corp"
                            }
                          },
                          "permissions": ["read", "write"],
                          "created_at": "2024-01-01T00:00:00Z"
                        },
                        {
                          "id": "ws_membership_987654321",
                          "workspace": {
                            "id": "workspace_456789123",
                            "name": "Marketing Team",
                            "slug": "marketing-team",
                            "organization": {
                              "id": "org_123456789",
                              "name": "Acme Corporation",
                              "slug": "acme-corp"
                            }
                          },
                          "permissions": ["read"],
                          "created_at": "2024-01-05T00:00:00Z"
                        }
                      ],
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to view workspace memberships"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/email-addresses": {
      "get": {
        "tags": ["User Management"],
        "summary": "Get User's Email Addresses",
        "description": "Retrieve all email addresses associated with the current user's account, including verification status.",
        "responses": {
          "200": {
            "description": "Email addresses retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "email_addresses": {
                    "summary": "User Email Addresses",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": [
                        {
                          "id": "email_123456789",
                          "email_address": "john.doe@example.com",
                          "verified": true,
                          "primary": true,
                          "created_at": "2024-01-01T00:00:00Z",
                          "verified_at": "2024-01-01T00:15:00Z"
                        },
                        {
                          "id": "email_987654321",
                          "email_address": "john.personal@gmail.com",
                          "verified": false,
                          "primary": false,
                          "created_at": "2024-01-10T12:00:00Z",
                          "verified_at": null
                        }
                      ],
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to view email addresses"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["User Management"],
        "summary": "Add Email Address",
        "description": "Add a new email address to the current user's account. Email verification will be required.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email_address": {
                    "type": "string",
                    "format": "email",
                    "description": "Email address to add"
                  }
                },
                "required": ["email_address"]
              },
              "examples": {
                "add_email": {
                  "summary": "Add New Email",
                  "value": {
                    "email_address": "john.work@company.com"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email address added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "email_added": {
                    "summary": "Email Added Successfully",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "id": "email_456789123",
                        "email_address": "john.work@company.com",
                        "verified": false,
                        "primary": false,
                        "created_at": "2024-01-15T15:45:00Z",
                        "verified_at": null
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "email_exists": {
                    "summary": "Email already exists",
                    "value": {
                      "status": 400,
                      "message": "Email already exists",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "EMAIL_EXISTS",
                          "message": "This email address is already associated with an account"
                        }
                      ]
                    }
                  },
                  "invalid_email": {
                    "summary": "Invalid email format",
                    "value": {
                      "status": 400,
                      "message": "Invalid email format",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_EMAIL",
                          "message": "Invalid email format"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to add email addresses"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/email-addresses/{id}": {
      "delete": {
        "tags": ["User Management"],
        "summary": "Remove Email Address",
        "description": "Remove an email address from the current user's account. Cannot remove the primary email address.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Email address ID to remove"
          }
        ],
        "responses": {
          "200": {
            "description": "Email address removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "email_removed": {
                    "summary": "Email Removed Successfully",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "message": "Email address removed successfully"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Cannot remove primary email",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "primary_email": {
                    "summary": "Cannot remove primary email",
                    "value": {
                      "status": 400,
                      "message": "Cannot remove primary email address",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "CANNOT_REMOVE_PRIMARY_EMAIL",
                          "message": "Primary email address cannot be removed"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Email address not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "email_not_found": {
                    "summary": "Email address not found",
                    "value": {
                      "status": 404,
                      "message": "Email address not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "EMAIL_NOT_FOUND",
                          "message": "Email address not found or does not belong to current user"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to remove email addresses"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/email-addresses/{id}/prepare-verification": {
      "post": {
        "tags": ["User Management"],
        "summary": "Prepare Email Verification",
        "description": "Send verification email to verify ownership of an email address.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Email address ID to verify"
          }
        ],
        "responses": {
          "200": {
            "description": "Verification email sent successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "verification_sent": {
                    "summary": "Verification Email Sent",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "message": "Verification email sent to john.work@company.com"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Already verified or invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "already_verified": {
                    "summary": "Email already verified",
                    "value": {
                      "status": 400,
                      "message": "Email already verified",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ALREADY_VERIFIED",
                          "message": "Email address is already verified"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limited",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "rate_limited": {
                    "summary": "Too many verification requests",
                    "value": {
                      "status": 429,
                      "message": "Rate limit exceeded",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "RATE_LIMIT_EXCEEDED",
                          "message": "Too many verification emails sent. Please wait before requesting another."
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to verify email addresses"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/email-addresses/{id}/attempt-verification": {
      "post": {
        "tags": ["User Management"],
        "summary": "Verify Email Address",
        "description": "Complete email verification using verification code sent to the email address.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Email address ID to verify"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "code": {
                    "type": "string",
                    "description": "Verification code from email"
                  }
                },
                "required": ["code"]
              },
              "examples": {
                "verify_email": {
                  "summary": "Verify with Code",
                  "value": {
                    "code": "123456"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email verified successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "email_verified": {
                    "summary": "Email Verification Success",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "id": "email_456789123",
                        "email_address": "john.work@company.com",
                        "verified": true,
                        "primary": false,
                        "created_at": "2024-01-15T15:45:00Z",
                        "verified_at": "2024-01-15T16:00:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid verification code",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_code": {
                    "summary": "Invalid verification code",
                    "value": {
                      "status": 400,
                      "message": "Invalid verification code",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_CODE",
                          "message": "The verification code is incorrect or has expired"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to verify email addresses"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/email-addresses/{id}/make-primary": {
      "post": {
        "tags": ["User Management"],
        "summary": "Make Email Primary",
        "description": "Set an email address as the primary email for the user account. Email must be verified first.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Email address ID to make primary"
          }
        ],
        "responses": {
          "200": {
            "description": "Primary email updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "primary_updated": {
                    "summary": "Primary Email Updated",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "id": "email_456789123",
                        "email_address": "john.work@company.com",
                        "verified": true,
                        "primary": true,
                        "created_at": "2024-01-15T15:45:00Z",
                        "verified_at": "2024-01-15T16:00:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Email not verified",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_verified": {
                    "summary": "Email not verified",
                    "value": {
                      "status": 400,
                      "message": "Email must be verified to set as primary",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "EMAIL_NOT_VERIFIED",
                          "message": "Email address must be verified before setting as primary"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to update primary email"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/phone-numbers": {
      "get": {
        "tags": ["User Management"],
        "summary": "Get User's Phone Numbers",
        "description": "Retrieve all phone numbers associated with the current user's account, including verification status.",
        "responses": {
          "200": {
            "description": "Phone numbers retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "phone_numbers": {
                    "summary": "User Phone Numbers",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": [
                        {
                          "id": "phone_123456789",
                          "phone_number": "+1234567890",
                          "verified": true,
                          "primary": true,
                          "created_at": "2024-01-01T00:00:00Z",
                          "verified_at": "2024-01-01T00:30:00Z"
                        },
                        {
                          "id": "phone_987654321",
                          "phone_number": "+1987654321",
                          "verified": false,
                          "primary": false,
                          "created_at": "2024-01-10T12:00:00Z",
                          "verified_at": null
                        }
                      ],
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to view phone numbers"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["User Management"],
        "summary": "Add Phone Number",
        "description": "Add a new phone number to the current user's account. Phone verification will be required.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "phone_number": {
                    "type": "string",
                    "description": "Phone number with country code (E.164 format)"
                  }
                },
                "required": ["phone_number"]
              },
              "examples": {
                "add_phone": {
                  "summary": "Add New Phone Number",
                  "value": {
                    "phone_number": "+1555123456"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Phone number added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "phone_added": {
                    "summary": "Phone Number Added Successfully",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "id": "phone_456789123",
                        "phone_number": "+1555123456",
                        "verified": false,
                        "primary": false,
                        "created_at": "2024-01-15T15:45:00Z",
                        "verified_at": null
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "phone_exists": {
                    "summary": "Phone number already exists",
                    "value": {
                      "status": 400,
                      "message": "Phone number already exists",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "PHONE_EXISTS",
                          "message": "This phone number is already associated with an account"
                        }
                      ]
                    }
                  },
                  "invalid_phone": {
                    "summary": "Invalid phone number format",
                    "value": {
                      "status": 400,
                      "message": "Invalid phone number format",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_PHONE",
                          "message": "Phone number must be in E.164 format"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to add phone numbers"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/phone-numbers/{id}": {
      "delete": {
        "tags": ["User Management"],
        "summary": "Remove Phone Number",
        "description": "Remove a phone number from the current user's account. Cannot remove the primary phone number unless another phone number is set as primary first.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Phone number ID to remove"
          }
        ],
        "responses": {
          "200": {
            "description": "Phone number removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "phone_removed": {
                    "summary": "Phone Number Removed",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "deleted": true,
                        "id": "phone_987654321"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "primary_phone_removal": {
                    "summary": "Cannot remove primary phone",
                    "value": {
                      "status": 400,
                      "message": "Cannot remove primary phone number",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "PRIMARY_PHONE_REMOVAL",
                          "message": "Set another phone number as primary before removing this one"
                        }
                      ]
                    }
                  },
                  "last_phone_removal": {
                    "summary": "Cannot remove last phone",
                    "value": {
                      "status": 400,
                      "message": "Cannot remove the only phone number",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "LAST_PHONE_REMOVAL",
                          "message": "Account must have at least one phone number"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to remove phone numbers"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Phone number doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "phone_not_found": {
                    "summary": "Phone number not found",
                    "value": {
                      "status": 404,
                      "message": "Phone number not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "PHONE_NOT_FOUND",
                          "message": "Phone number does not exist or does not belong to this user"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/phone-numbers/{id}/prepare-verification": {
      "post": {
        "tags": ["User Management"],
        "summary": "Send Phone Verification SMS",
        "description": "Send an SMS with a verification code to the specified phone number. Rate limited to prevent abuse.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Phone number ID to verify"
          }
        ],
        "responses": {
          "200": {
            "description": "Verification SMS sent successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "sms_sent": {
                    "summary": "SMS Verification Sent",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "sent": true,
                        "phone_number": "+1234567890",
                        "expires_in": 300
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  },
                  "already_verified": {
                    "summary": "Phone Already Verified",
                    "value": {
                      "status": 200,
                      "message": "Phone number is already verified",
                      "data": {
                        "already_verified": true,
                        "phone_number": "+1234567890"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "sms_service_error": {
                    "summary": "SMS service error",
                    "value": {
                      "status": 400,
                      "message": "Failed to send SMS verification",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "SMS_SEND_FAILED",
                          "message": "Unable to send verification SMS to this number"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to verify phone numbers"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Phone number doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "phone_not_found": {
                    "summary": "Phone number not found",
                    "value": {
                      "status": 404,
                      "message": "Phone number not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "PHONE_NOT_FOUND",
                          "message": "Phone number does not exist or does not belong to this user"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limited",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "rate_limited": {
                    "summary": "Rate limited",
                    "value": {
                      "status": 429,
                      "message": "Too many verification attempts",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "RATE_LIMITED",
                          "message": "Please wait before requesting another verification code"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/phone-numbers/{id}/attempt-verification": {
      "post": {
        "tags": ["User Management"],
        "summary": "Verify Phone Number with OTP",
        "description": "Verify a phone number using the OTP code sent via SMS. The code expires after 5 minutes.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Phone number ID to verify"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "code": {
                    "type": "string",
                    "description": "6-digit OTP code received via SMS",
                    "pattern": "^[0-9]{6}$"
                  }
                },
                "required": ["code"]
              },
              "examples": {
                "verification_code": {
                  "summary": "OTP Verification",
                  "value": {
                    "code": "123456"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Phone number verified successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "verification_success": {
                    "summary": "Phone Verification Success",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "verified": true,
                        "phone_number": {
                          "id": "phone_987654321",
                          "phone_number": "+1234567890",
                          "verified": true,
                          "primary": false,
                          "created_at": "2024-01-10T12:00:00Z",
                          "verified_at": "2024-01-10T12:05:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_code": {
                    "summary": "Invalid verification code",
                    "value": {
                      "status": 400,
                      "message": "Invalid verification code",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_CODE",
                          "message": "The verification code is incorrect"
                        }
                      ]
                    }
                  },
                  "expired_code": {
                    "summary": "Expired verification code",
                    "value": {
                      "status": 400,
                      "message": "Verification code has expired",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "EXPIRED_CODE",
                          "message": "Please request a new verification code"
                        }
                      ]
                    }
                  },
                  "already_verified": {
                    "summary": "Phone already verified",
                    "value": {
                      "status": 400,
                      "message": "Phone number is already verified",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ALREADY_VERIFIED",
                          "message": "This phone number is already verified"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to verify phone numbers"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Phone number doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "phone_not_found": {
                    "summary": "Phone number not found",
                    "value": {
                      "status": 404,
                      "message": "Phone number not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "PHONE_NOT_FOUND",
                          "message": "Phone number does not exist or does not belong to this user"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/phone-numbers/{id}/make-primary": {
      "post": {
        "tags": ["User Management"],
        "summary": "Set Phone Number as Primary",
        "description": "Set a verified phone number as the user's primary phone number. Only verified phone numbers can be set as primary.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Phone number ID to set as primary"
          }
        ],
        "responses": {
          "200": {
            "description": "Phone number set as primary successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "primary_phone_set": {
                    "summary": "Primary Phone Set",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "primary_phone_updated": true,
                        "phone_number": {
                          "id": "phone_987654321",
                          "phone_number": "+1234567890",
                          "verified": true,
                          "primary": true,
                          "created_at": "2024-01-10T12:00:00Z",
                          "verified_at": "2024-01-10T12:05:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "phone_not_verified": {
                    "summary": "Phone number not verified",
                    "value": {
                      "status": 400,
                      "message": "Phone number must be verified before setting as primary",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "PHONE_NOT_VERIFIED",
                          "message": "Please verify this phone number before setting it as primary"
                        }
                      ]
                    }
                  },
                  "already_primary": {
                    "summary": "Phone already primary",
                    "value": {
                      "status": 400,
                      "message": "This phone number is already the primary phone",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ALREADY_PRIMARY",
                          "message": "This phone number is already set as the primary phone"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to set primary phone"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Phone number doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "phone_not_found": {
                    "summary": "Phone number not found",
                    "value": {
                      "status": 404,
                      "message": "Phone number not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "PHONE_NOT_FOUND",
                          "message": "Phone number does not exist or does not belong to this user"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/authenticator": {
      "post": {
        "tags": ["User Management"],
        "summary": "Generate New TOTP Authenticator",
        "description": "Generate a new Time-based One-Time Password (TOTP) authenticator for two-factor authentication. Returns a QR code URL and manual setup key.",
        "responses": {
          "200": {
            "description": "Authenticator generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "authenticator_generated": {
                    "summary": "New Authenticator Generated",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "id": "auth_123456789",
                        "secret": "JBSWY3DPEHPK3PXP",
                        "qr_code_url": "otpauth://totp/Acme%20Corp:john.doe@example.com?secret=JBSWY3DPEHPK3PXP&issuer=Acme%20Corp",
                        "backup_codes": [
                          "1234-5678",
                          "2345-6789",
                          "3456-7890",
                          "4567-8901",
                          "5678-9012",
                          "6789-0123",
                          "7890-1234",
                          "8901-2345",
                          "9012-3456",
                          "0123-4567",
                          "1357-2468",
                          "2468-1357"
                        ],
                        "verified": false,
                        "created_at": "2024-01-15T10:30:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "authenticator_exists": {
                    "summary": "Authenticator already exists",
                    "value": {
                      "status": 400,
                      "message": "User already has an active authenticator",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "AUTHENTICATOR_EXISTS",
                          "message": "Please remove the existing authenticator before creating a new one"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to manage authenticators"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/authenticator/attempt-verification": {
      "post": {
        "tags": ["User Management"],
        "summary": "Verify TOTP Authenticator Setup",
        "description": "Verify that the TOTP authenticator is set up correctly by providing two consecutive authentication codes. This activates two-factor authentication.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "code1": {
                    "type": "string",
                    "description": "First 6-digit TOTP code",
                    "pattern": "^[0-9]{6}$"
                  },
                  "code2": {
                    "type": "string",
                    "description": "Second 6-digit TOTP code (must be different from first)",
                    "pattern": "^[0-9]{6}$"
                  }
                },
                "required": ["code1", "code2"]
              },
              "examples": {
                "verification_codes": {
                  "summary": "Two consecutive TOTP codes",
                  "value": {
                    "code1": "123456",
                    "code2": "789012"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Authenticator verified and activated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "authenticator_verified": {
                    "summary": "Authenticator Verification Success",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "verified": true,
                        "two_factor_enabled": true,
                        "authenticator": {
                          "id": "auth_123456789",
                          "verified": true,
                          "created_at": "2024-01-15T10:30:00Z",
                          "verified_at": "2024-01-15T10:35:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_codes": {
                    "summary": "Invalid verification codes",
                    "value": {
                      "status": 400,
                      "message": "Invalid verification codes",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_TOTP_CODES",
                          "message": "One or both verification codes are incorrect"
                        }
                      ]
                    }
                  },
                  "same_codes": {
                    "summary": "Same codes provided",
                    "value": {
                      "status": 400,
                      "message": "The two codes must be different",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "DUPLICATE_CODES",
                          "message": "Please provide two different consecutive codes"
                        }
                      ]
                    }
                  },
                  "no_authenticator": {
                    "summary": "No authenticator to verify",
                    "value": {
                      "status": 400,
                      "message": "No unverified authenticator found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "NO_AUTHENTICATOR",
                          "message": "Please generate an authenticator first"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to verify authenticators"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/authenticator/{id}": {
      "delete": {
        "tags": ["User Management"],
        "summary": "Delete TOTP Authenticator",
        "description": "Remove the TOTP authenticator from the user's account, disabling two-factor authentication. Requires password confirmation for security.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Authenticator ID to delete"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "password": {
                    "type": "string",
                    "description": "Current account password for confirmation"
                  }
                },
                "required": ["password"]
              },
              "examples": {
                "delete_confirmation": {
                  "summary": "Password confirmation",
                  "value": {
                    "password": "currentPassword123!"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Authenticator deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "authenticator_deleted": {
                    "summary": "Authenticator Deleted",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "deleted": true,
                        "two_factor_enabled": false,
                        "id": "auth_123456789"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_password": {
                    "summary": "Invalid password",
                    "value": {
                      "status": 400,
                      "message": "Invalid password",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_PASSWORD",
                          "message": "The provided password is incorrect"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to delete authenticators"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Authenticator doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "authenticator_not_found": {
                    "summary": "Authenticator not found",
                    "value": {
                      "status": 404,
                      "message": "Authenticator not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "AUTHENTICATOR_NOT_FOUND",
                          "message": "Authenticator does not exist or does not belong to this user"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/backup-codes": {
      "post": {
        "tags": ["User Management"],
        "summary": "Generate Backup Codes",
        "description": "Generate 12 backup codes for two-factor authentication recovery. These codes can be used when the authenticator app is unavailable.",
        "responses": {
          "200": {
            "description": "Backup codes generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "backup_codes_generated": {
                    "summary": "Backup Codes Generated",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "backup_codes": [
                          "ABCD-1234",
                          "EFGH-5678",
                          "IJKL-9012",
                          "MNOP-3456",
                          "QRST-7890",
                          "UVWX-2468",
                          "YZAB-1357",
                          "CDEF-9024",
                          "GHIJ-5791",
                          "KLMN-8246",
                          "OPQR-1593",
                          "STUV-7420"
                        ],
                        "generated_at": "2024-01-15T11:00:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "no_2fa_enabled": {
                    "summary": "2FA not enabled",
                    "value": {
                      "status": 400,
                      "message": "Two-factor authentication must be enabled first",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "2FA_NOT_ENABLED",
                          "message": "Please set up an authenticator before generating backup codes"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to generate backup codes"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/backup-codes/regenerate": {
      "post": {
        "tags": ["User Management"],
        "summary": "Regenerate Backup Codes",
        "description": "Regenerate all backup codes, invalidating any previously generated codes. This should be done if backup codes are compromised or lost.",
        "responses": {
          "200": {
            "description": "Backup codes regenerated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "backup_codes_regenerated": {
                    "summary": "Backup Codes Regenerated",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "backup_codes": [
                          "WXYZ-9876",
                          "ABCD-5432",
                          "EFGH-1098",
                          "IJKL-7654",
                          "MNOP-3210",
                          "QRST-9876",
                          "UVWX-5432",
                          "YZAB-1098",
                          "CDEF-7654",
                          "GHIJ-3210",
                          "KLMN-9876",
                          "OPQR-5432"
                        ],
                        "regenerated_at": "2024-01-15T11:30:00Z",
                        "previous_codes_invalidated": true
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "no_backup_codes": {
                    "summary": "No backup codes to regenerate",
                    "value": {
                      "status": 400,
                      "message": "No existing backup codes found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "NO_BACKUP_CODES",
                          "message": "Generate backup codes first before regenerating"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to regenerate backup codes"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/profile-picture": {
      "post": {
        "tags": ["User Management"],
        "summary": "Upload Profile Picture",
        "description": "Upload a new profile picture for the current user. Accepts image files and uploads them to the CDN service.",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "Image file to upload (JPEG, PNG, WebP supported)"
                  }
                },
                "required": ["file"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile picture uploaded successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "picture_uploaded": {
                    "summary": "Profile Picture Uploaded",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "image_url": "https://cdn.example.com/users/profile-pictures/user_456789123_1642680000.jpg",
                        "has_profile_picture": true,
                        "uploaded_at": "2024-01-15T12:00:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_file_type": {
                    "summary": "Invalid file type",
                    "value": {
                      "status": 400,
                      "message": "Invalid file type",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_FILE_TYPE",
                          "message": "Only JPEG, PNG, and WebP images are supported"
                        }
                      ]
                    }
                  },
                  "file_too_large": {
                    "summary": "File too large",
                    "value": {
                      "status": 400,
                      "message": "File size exceeds limit",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "FILE_TOO_LARGE",
                          "message": "Profile picture must be under 5MB"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to upload profile pictures"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/update-password": {
      "post": {
        "tags": ["User Management"],
        "summary": "Update Password",
        "description": "Update the current user's password. Requires the current password for verification and a new password meeting security requirements.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "current_password": {
                    "type": "string",
                    "description": "Current account password"
                  },
                  "new_password": {
                    "type": "string",
                    "minLength": 6,
                    "maxLength": 125,
                    "description": "New password (6-125 characters, must contain number and symbol)"
                  }
                },
                "required": ["current_password", "new_password"]
              },
              "examples": {
                "password_update": {
                  "summary": "Password Update",
                  "value": {
                    "current_password": "oldPassword123!",
                    "new_password": "newSecurePassword456@"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "password_updated": {
                    "summary": "Password Updated Successfully",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "password_updated": true,
                        "updated_at": "2024-01-15T12:30:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_current_password": {
                    "summary": "Invalid current password",
                    "value": {
                      "status": 400,
                      "message": "Current password is incorrect",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_CURRENT_PASSWORD",
                          "message": "The current password you entered is incorrect"
                        }
                      ]
                    }
                  },
                  "weak_password": {
                    "summary": "New password too weak",
                    "value": {
                      "status": 400,
                      "message": "Password does not meet security requirements",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "WEAK_PASSWORD",
                          "message": "Password must be 6-125 characters and contain at least one number and one symbol"
                        }
                      ]
                    }
                  },
                  "same_password": {
                    "summary": "New password same as current",
                    "value": {
                      "status": 400,
                      "message": "New password cannot be the same as current password",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "SAME_PASSWORD",
                          "message": "Please choose a different password"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to update password"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/password": {
      "delete": {
        "tags": ["User Management"],
        "summary": "Remove Password",
        "description": "Remove the password from the user's account entirely, making the account password-less. Requires current password and validation that alternative authentication methods are available.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "current_password": {
                    "type": "string",
                    "description": "Current account password for confirmation"
                  }
                },
                "required": ["current_password"]
              },
              "examples": {
                "password_removal": {
                  "summary": "Password Removal",
                  "value": {
                    "current_password": "currentPassword123!"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "password_removed": {
                    "summary": "Password Removed Successfully",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "password_removed": true,
                        "passwordless_account": true,
                        "alternative_auth_methods": [
                          "social_connections",
                          "magic_link"
                        ],
                        "removed_at": "2024-01-15T13:00:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_password": {
                    "summary": "Invalid current password",
                    "value": {
                      "status": 400,
                      "message": "Current password is incorrect",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_PASSWORD",
                          "message": "The current password you entered is incorrect"
                        }
                      ]
                    }
                  },
                  "no_alternative_auth": {
                    "summary": "No alternative authentication methods",
                    "value": {
                      "status": 400,
                      "message": "Cannot remove password without alternative authentication methods",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "NO_ALTERNATIVE_AUTH",
                          "message": "Please set up social connections or other authentication methods before removing password"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to remove password"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/signins": {
      "get": {
        "tags": ["User Management"],
        "summary": "Get Active Sessions",
        "description": "Retrieve all active sign-in sessions for the current user, including device information and location data.",
        "responses": {
          "200": {
            "description": "Active sessions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "active_sessions": {
                    "summary": "Active User Sessions",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": [
                        {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "device_info": {
                            "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36",
                            "device_type": "desktop",
                            "browser": "Chrome",
                            "os": "macOS"
                          },
                          "location": {
                            "ip_address": "203.0.113.1",
                            "country": "United States",
                            "city": "San Francisco",
                            "region": "California"
                          },
                          "current_session": true,
                          "created_at": "2024-01-01T12:00:00Z",
                          "last_activity": "2024-01-15T14:30:00Z"
                        },
                        {
                          "id": "signin_123456789",
                          "user_id": "user_456789123",
                          "device_info": {
                            "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X) AppleWebKit/605.1.15",
                            "device_type": "mobile",
                            "browser": "Safari",
                            "os": "iOS"
                          },
                          "location": {
                            "ip_address": "198.51.100.42",
                            "country": "United States",
                            "city": "New York",
                            "region": "New York"
                          },
                          "current_session": false,
                          "created_at": "2024-01-10T08:00:00Z",
                          "last_activity": "2024-01-14T22:15:00Z"
                        }
                      ],
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to view sessions"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/signins/{id}/signout": {
      "patch": {
        "tags": ["User Management"],
        "summary": "Sign Out from Specific Session",
        "description": "Sign out from a specific session by its ID. This will invalidate the session and end the user's access from that device/browser.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session ID to sign out from"
          }
        ],
        "responses": {
          "200": {
            "description": "Session signed out successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "session_signed_out": {
                    "summary": "Session Signed Out",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "signed_out": true,
                        "session_id": "signin_123456789",
                        "signed_out_at": "2024-01-15T15:00:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "cannot_signout_current": {
                    "summary": "Cannot sign out current session",
                    "value": {
                      "status": 400,
                      "message": "Cannot sign out from current session",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "CURRENT_SESSION_SIGNOUT",
                          "message": "Use the main sign out endpoint to end your current session"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to manage sessions"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Session doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "session_not_found": {
                    "summary": "Session not found",
                    "value": {
                      "status": 404,
                      "message": "Session not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "SESSION_NOT_FOUND",
                          "message": "Session does not exist or does not belong to this user"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/social-connections/{id}": {
      "delete": {
        "tags": ["User Management"],
        "summary": "Disconnect Social Connection",
        "description": "Disconnect a social authentication connection (OAuth account) such as Google, GitHub, or Microsoft from the user's account.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Social connection ID to disconnect"
          }
        ],
        "responses": {
          "200": {
            "description": "Social connection disconnected successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "connection_disconnected": {
                    "summary": "Social Connection Disconnected",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "disconnected": true,
                        "connection_id": "social_123456789",
                        "provider": "google",
                        "disconnected_at": "2024-01-15T15:30:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "last_auth_method": {
                    "summary": "Cannot disconnect last authentication method",
                    "value": {
                      "status": 400,
                      "message": "Cannot disconnect the only authentication method",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "LAST_AUTH_METHOD",
                          "message": "Set up a password or other authentication method before disconnecting this social connection"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to manage social connections"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Social connection doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "connection_not_found": {
                    "summary": "Social connection not found",
                    "value": {
                      "status": 404,
                      "message": "Social connection not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "CONNECTION_NOT_FOUND",
                          "message": "Social connection does not exist or does not belong to this user"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/me/account": {
      "delete": {
        "tags": ["User Management"],
        "summary": "Delete User Account",
        "description": "Permanently delete the current user's account and all associated data. This action cannot be undone and requires password confirmation.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "password": {
                    "type": "string",
                    "description": "Current account password for confirmation"
                  },
                  "confirmation": {
                    "type": "string",
                    "enum": ["DELETE_MY_ACCOUNT"],
                    "description": "Confirmation string that must be exactly 'DELETE_MY_ACCOUNT'"
                  }
                },
                "required": ["password", "confirmation"]
              },
              "examples": {
                "account_deletion": {
                  "summary": "Account Deletion Request",
                  "value": {
                    "password": "currentPassword123!",
                    "confirmation": "DELETE_MY_ACCOUNT"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Account deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "account_deleted": {
                    "summary": "Account Deleted Successfully",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "account_deleted": true,
                        "user_id": "user_456789123",
                        "deleted_at": "2024-01-15T16:00:00Z",
                        "data_purged": true
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_password": {
                    "summary": "Invalid password",
                    "value": {
                      "status": 400,
                      "message": "Current password is incorrect",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_PASSWORD",
                          "message": "The provided password is incorrect"
                        }
                      ]
                    }
                  },
                  "invalid_confirmation": {
                    "summary": "Invalid confirmation string",
                    "value": {
                      "status": 400,
                      "message": "Invalid confirmation string",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_CONFIRMATION",
                          "message": "Confirmation string must be exactly 'DELETE_MY_ACCOUNT'"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to delete account"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/organizations": {
      "post": {
        "tags": ["Organizations"],
        "summary": "Create Organization",
        "description": "Create a new organization. The creator is automatically assigned as the organization admin with full permissions.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Organization name",
                    "minLength": 1,
                    "maxLength": 100
                  },
                  "description": {
                    "type": "string",
                    "description": "Organization description",
                    "maxLength": 500
                  }
                },
                "required": ["name"]
              },
              "examples": {
                "create_organization": {
                  "summary": "Create Organization",
                  "value": {
                    "name": "Acme Corporation",
                    "description": "Leading provider of innovative software solutions"
                  }
                },
                "minimal_organization": {
                  "summary": "Minimal Organization",
                  "value": {
                    "name": "Tech Startup"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Organization created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "organization_created": {
                    "summary": "Organization Created",
                    "value": {
                      "status": 201,
                      "message": "",
                      "data": {
                        "organization": {
                          "id": "org_123456789",
                          "name": "Acme Corporation",
                          "description": "Leading provider of innovative software solutions",
                          "image_url": null,
                          "slug": "acme-corporation",
                          "member_count": 1,
                          "workspace_count": 0,
                          "whitelisted_ips": [],
                          "enable_ip_restriction": false,
                          "enforce_mfa_setup": false,
                          "created_at": "2024-01-15T16:30:00Z",
                          "updated_at": "2024-01-15T16:30:00Z"
                        },
                        "membership": {
                          "id": "membership_987654321",
                          "organization_id": "org_123456789",
                          "user_id": "user_456789123",
                          "role": {
                            "id": "role_admin",
                            "name": "Administrator",
                            "permissions": [
                              "organization:admin",
                              "organization:manage",
                              "organization:read"
                            ]
                          },
                          "created_at": "2024-01-15T16:30:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "name_taken": {
                    "summary": "Organization name already taken",
                    "value": {
                      "status": 400,
                      "message": "Organization name already exists",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ORGANIZATION_NAME_EXISTS",
                          "message": "An organization with this name already exists in this deployment"
                        }
                      ]
                    }
                  },
                  "invalid_name": {
                    "summary": "Invalid organization name",
                    "value": {
                      "status": 400,
                      "message": "Invalid organization name",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_ORGANIZATION_NAME",
                          "message": "Organization name must be between 1 and 100 characters"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to create organizations"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/organizations/{id}": {
      "patch": {
        "tags": ["Organizations"],
        "summary": "Update Organization",
        "description": "Update organization details including name, description, security settings, and IP restrictions. Requires organization admin or manage permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID to update"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Organization name",
                    "minLength": 1,
                    "maxLength": 100
                  },
                  "description": {
                    "type": "string",
                    "description": "Organization description",
                    "maxLength": 500
                  },
                  "whitelisted_ips": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "List of whitelisted IP addresses"
                  },
                  "enable_ip_restriction": {
                    "type": "boolean",
                    "description": "Enable IP restriction for organization members"
                  },
                  "enforce_mfa_setup": {
                    "type": "boolean",
                    "description": "Require all members to set up MFA"
                  },
                  "auto_assigned_workspace_id": {
                    "type": "string",
                    "description": "Default workspace ID for new members"
                  }
                }
              },
              "examples": {
                "update_basic_info": {
                  "summary": "Update Basic Information",
                  "value": {
                    "name": "Acme Corporation Ltd",
                    "description": "Updated description for our growing company"
                  }
                },
                "update_security_settings": {
                  "summary": "Update Security Settings",
                  "value": {
                    "enable_ip_restriction": true,
                    "whitelisted_ips": ["203.0.113.0/24", "198.51.100.42"],
                    "enforce_mfa_setup": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Organization updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "organization_updated": {
                    "summary": "Organization Updated",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "id": "org_123456789",
                        "name": "Acme Corporation Ltd",
                        "description": "Updated description for our growing company",
                        "image_url": "https://cdn.example.com/orgs/acme-corp.jpg",
                        "slug": "acme-corporation-ltd",
                        "member_count": 15,
                        "workspace_count": 3,
                        "whitelisted_ips": ["203.0.113.0/24", "198.51.100.42"],
                        "enable_ip_restriction": true,
                        "enforce_mfa_setup": true,
                        "auto_assigned_workspace_id": "workspace_default",
                        "created_at": "2024-01-01T10:00:00Z",
                        "updated_at": "2024-01-15T17:00:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_ip_format": {
                    "summary": "Invalid IP address format",
                    "value": {
                      "status": 400,
                      "message": "Invalid IP address format",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_IP_ADDRESS",
                          "message": "IP address must be in valid CIDR format (e.g., 192.168.1.0/24)"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to update organizations"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires organization:admin or organization:manage permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Organization doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "organization_not_found": {
                    "summary": "Organization not found",
                    "value": {
                      "status": 404,
                      "message": "Organization not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ORGANIZATION_NOT_FOUND",
                          "message": "Organization does not exist or you don't have access"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Organizations"],
        "summary": "Delete Organization",
        "description": "Permanently delete an organization and all its associated data including workspaces, members, and settings. This action cannot be undone. Requires organization owner permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID to delete"
          }
        ],
        "responses": {
          "200": {
            "description": "Organization deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "organization_deleted": {
                    "summary": "Organization Deleted",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "deleted": true,
                        "organization_id": "org_123456789",
                        "deleted_at": "2024-01-15T17:30:00Z",
                        "data_purged": true
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to delete organizations"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_owner": {
                    "summary": "Not organization owner",
                    "value": {
                      "status": 403,
                      "message": "Only organization owner can delete the organization",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "NOT_ORGANIZATION_OWNER",
                          "message": "Organization deletion requires owner permissions"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Organization doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "organization_not_found": {
                    "summary": "Organization not found",
                    "value": {
                      "status": 404,
                      "message": "Organization not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ORGANIZATION_NOT_FOUND",
                          "message": "Organization does not exist or you don't have access"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/organizations/{id}/leave": {
      "delete": {
        "tags": ["Organizations"],
        "summary": "Leave Organization",
        "description": "Leave an organization as a member. The sole admin/owner cannot leave without transferring ownership first. Clears active organization session data.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID to leave"
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully left organization",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "left_organization": {
                    "summary": "Left Organization",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "left": true,
                        "organization_id": "org_123456789",
                        "left_at": "2024-01-15T18:00:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "sole_admin": {
                    "summary": "Cannot leave as sole admin",
                    "value": {
                      "status": 400,
                      "message": "Cannot leave organization as the sole administrator",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "SOLE_ADMIN_LEAVE",
                          "message": "Transfer ownership to another member before leaving"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to leave organizations"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Organization doesn't exist or not a member",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_member": {
                    "summary": "Not a member of organization",
                    "value": {
                      "status": 404,
                      "message": "Not a member of this organization",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "NOT_ORGANIZATION_MEMBER",
                          "message": "You are not a member of this organization"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/organizations/{id}/members": {
      "get": {
        "tags": ["Organizations"],
        "summary": "Get Organization Members",
        "description": "Retrieve all members of an organization along with their roles and permissions. Requires valid organization membership.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Organization members retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "organization_members": {
                    "summary": "Organization Members",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": [
                        {
                          "id": "membership_987654321",
                          "user": {
                            "id": "user_456789123",
                            "first_name": "John",
                            "last_name": "Doe",
                            "email": "john.doe@example.com",
                            "username": "johndoe",
                            "image_url": "https://cdn.example.com/avatars/john.jpg",
                            "email_verified": true,
                            "phone_verified": true,
                            "two_factor_enabled": true
                          },
                          "roles": [
                            {
                              "id": "role_admin",
                              "name": "Administrator",
                              "permissions": [
                                "organization:admin",
                                "organization:manage",
                                "organization:read"
                              ]
                            }
                          ],
                          "joined_at": "2024-01-01T10:00:00Z",
                          "last_active": "2024-01-15T18:30:00Z"
                        },
                        {
                          "id": "membership_123456789",
                          "user": {
                            "id": "user_789012345",
                            "first_name": "Jane",
                            "last_name": "Smith",
                            "email": "jane.smith@example.com",
                            "username": "janesmith",
                            "image_url": "https://cdn.example.com/avatars/jane.jpg",
                            "email_verified": true,
                            "phone_verified": false,
                            "two_factor_enabled": false
                          },
                          "roles": [
                            {
                              "id": "role_member",
                              "name": "Member",
                              "permissions": ["organization:read"]
                            },
                            {
                              "id": "role_manager",
                              "name": "Manager",
                              "permissions": [
                                "organization:manage",
                                "organization:read"
                              ]
                            }
                          ],
                          "joined_at": "2024-01-05T14:30:00Z",
                          "last_active": "2024-01-14T16:45:00Z"
                        }
                      ],
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to view organization members"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Not a member of organization",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_member": {
                    "summary": "Not organization member",
                    "value": {
                      "status": 403,
                      "message": "Not a member of this organization",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "NOT_ORGANIZATION_MEMBER",
                          "message": "You must be a member to view organization members"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Organization doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "organization_not_found": {
                    "summary": "Organization not found",
                    "value": {
                      "status": 404,
                      "message": "Organization not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ORGANIZATION_NOT_FOUND",
                          "message": "Organization does not exist"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/organizations/{id}/members/{memberId}": {
      "delete": {
        "tags": ["Organizations"],
        "summary": "Remove Organization Member",
        "description": "Remove a member from the organization. Requires organization admin or manage permissions. Cannot remove the sole administrator.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          },
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Member ID to remove"
          }
        ],
        "responses": {
          "200": {
            "description": "Member removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "member_removed": {
                    "summary": "Member Removed",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "removed": true,
                        "member_id": "membership_123456789",
                        "user_id": "user_789012345",
                        "removed_at": "2024-01-15T19:00:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "sole_admin_removal": {
                    "summary": "Cannot remove sole administrator",
                    "value": {
                      "status": 400,
                      "message": "Cannot remove the sole administrator",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "SOLE_ADMIN_REMOVAL",
                          "message": "Transfer admin role to another member before removing this member"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to remove members"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires organization:admin or organization:manage permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Member or organization doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "member_not_found": {
                    "summary": "Member not found",
                    "value": {
                      "status": 404,
                      "message": "Member not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "MEMBER_NOT_FOUND",
                          "message": "Member does not exist in this organization"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/organizations/{id}/members/{memberId}/roles/{roleId}": {
      "put": {
        "tags": ["Organizations"],
        "summary": "Add Member Role",
        "description": "Assign a role to an organization member. Requires organization admin or manage permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          },
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Member ID"
          },
          {
            "name": "roleId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Role ID to assign"
          }
        ],
        "responses": {
          "200": {
            "description": "Role assigned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "role_assigned": {
                    "summary": "Role Assigned",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "role_assigned": true,
                        "member_id": "membership_123456789",
                        "role": {
                          "id": "role_manager",
                          "name": "Manager",
                          "permissions": [
                            "organization:manage",
                            "organization:read"
                          ]
                        },
                        "assigned_at": "2024-01-15T19:30:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "role_already_assigned": {
                    "summary": "Role already assigned",
                    "value": {
                      "status": 400,
                      "message": "Member already has this role",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ROLE_ALREADY_ASSIGNED",
                          "message": "This member already has this role"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to manage member roles"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires organization:admin or organization:manage permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Member or role doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "role_not_found": {
                    "summary": "Role not found",
                    "value": {
                      "status": 404,
                      "message": "Role not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ROLE_NOT_FOUND",
                          "message": "Role does not exist or is not available for this organization"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Organizations"],
        "summary": "Remove Member Role",
        "description": "Remove a role from an organization member. Requires organization admin or manage permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          },
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Member ID"
          },
          {
            "name": "roleId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Role ID to remove"
          }
        ],
        "responses": {
          "200": {
            "description": "Role removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "role_removed": {
                    "summary": "Role Removed",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "role_removed": true,
                        "member_id": "membership_123456789",
                        "role": {
                          "id": "role_manager",
                          "name": "Manager",
                          "permissions": [
                            "organization:manage",
                            "organization:read"
                          ]
                        },
                        "removed_at": "2024-01-15T19:35:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "role_not_assigned": {
                    "summary": "Role not assigned to member",
                    "value": {
                      "status": 400,
                      "message": "Member does not have this role",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ROLE_NOT_ASSIGNED",
                          "message": "Member does not have this role assigned"
                        }
                      ]
                    }
                  },
                  "cannot_remove_last_admin": {
                    "summary": "Cannot remove last admin role",
                    "value": {
                      "status": 400,
                      "message": "Cannot remove the last admin from organization",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "CANNOT_REMOVE_LAST_ADMIN",
                          "message": "Organization must have at least one admin"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to manage member roles"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires organization:admin or organization:manage permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Member or role doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "member_not_found": {
                    "summary": "Member not found",
                    "value": {
                      "status": 404,
                      "message": "Member not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "MEMBER_NOT_FOUND",
                          "message": "Member does not exist in this organization"
                        }
                      ]
                    }
                  },
                  "role_not_found": {
                    "summary": "Role not found",
                    "value": {
                      "status": 404,
                      "message": "Role not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ROLE_NOT_FOUND",
                          "message": "Role does not exist in this organization"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/organizations/{id}/invitations": {
      "get": {
        "tags": ["Organizations"],
        "summary": "Get Organization Invitations",
        "description": "Retrieve all pending invitations for an organization. Requires organization admin or manage permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Invitations retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invitations_list": {
                    "summary": "Organization Invitations",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": [
                        {
                          "id": "invitation_123456789",
                          "email": "newuser@acme.com",
                          "roles": [
                            {
                              "id": "role_member",
                              "name": "Member",
                              "permissions": ["organization:read"]
                            }
                          ],
                          "invited_by": {
                            "id": "user_456789123",
                            "first_name": "John",
                            "last_name": "Doe",
                            "email": "john.doe@acme.com"
                          },
                          "status": "pending",
                          "expires_at": "2024-01-22T19:30:00Z",
                          "created_at": "2024-01-15T19:30:00Z"
                        },
                        {
                          "id": "invitation_987654321",
                          "email": "manager@acme.com",
                          "roles": [
                            {
                              "id": "role_manager",
                              "name": "Manager",
                              "permissions": [
                                "organization:manage",
                                "organization:read"
                              ]
                            }
                          ],
                          "invited_by": {
                            "id": "user_456789123",
                            "first_name": "John",
                            "last_name": "Doe",
                            "email": "john.doe@acme.com"
                          },
                          "status": "pending",
                          "expires_at": "2024-01-23T10:15:00Z",
                          "created_at": "2024-01-16T10:15:00Z"
                        }
                      ],
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  },
                  "no_invitations": {
                    "summary": "No pending invitations",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": [],
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to view invitations"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires organization:admin or organization:manage permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Organization doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "organization_not_found": {
                    "summary": "Organization not found",
                    "value": {
                      "status": 404,
                      "message": "Organization not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ORGANIZATION_NOT_FOUND",
                          "message": "Organization does not exist"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Organizations"],
        "summary": "Invite Member to Organization",
        "description": "Send an invitation to join the organization. Requires organization admin or manage permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email address of the user to invite"
                  },
                  "role_ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Array of role IDs to assign to the invited member"
                  }
                },
                "required": ["email", "role_ids"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Invitation sent successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invitation_sent": {
                    "summary": "Invitation Sent",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "invitation": {
                          "id": "invitation_123456789",
                          "email": "newuser@acme.com",
                          "roles": [
                            {
                              "id": "role_member",
                              "name": "Member",
                              "permissions": ["organization:read"]
                            }
                          ],
                          "invited_by": {
                            "id": "user_456789123",
                            "first_name": "John",
                            "last_name": "Doe",
                            "email": "john.doe@acme.com"
                          },
                          "status": "pending",
                          "expires_at": "2024-01-22T19:30:00Z",
                          "created_at": "2024-01-15T19:30:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_email": {
                    "summary": "Invalid email format",
                    "value": {
                      "status": 400,
                      "message": "Invalid email format",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_EMAIL",
                          "message": "Please provide a valid email address"
                        }
                      ]
                    }
                  },
                  "already_member": {
                    "summary": "User already a member",
                    "value": {
                      "status": 400,
                      "message": "User is already a member of this organization",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ALREADY_MEMBER",
                          "message": "This user is already a member of the organization"
                        }
                      ]
                    }
                  },
                  "pending_invitation": {
                    "summary": "Invitation already pending",
                    "value": {
                      "status": 400,
                      "message": "Invitation already pending for this email",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "PENDING_INVITATION",
                          "message": "An invitation is already pending for this email address"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to send invitations"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires organization:admin or organization:manage permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Organization or roles don't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "organization_not_found": {
                    "summary": "Organization not found",
                    "value": {
                      "status": 404,
                      "message": "Organization not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ORGANIZATION_NOT_FOUND",
                          "message": "Organization does not exist"
                        }
                      ]
                    }
                  },
                  "role_not_found": {
                    "summary": "Role not found",
                    "value": {
                      "status": 404,
                      "message": "One or more roles not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ROLE_NOT_FOUND",
                          "message": "One or more specified roles do not exist"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/organizations/{id}/invitations/{invitationId}": {
      "delete": {
        "tags": ["Organizations"],
        "summary": "Cancel Organization Invitation",
        "description": "Cancel a pending invitation to the organization. Requires organization admin or manage permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          },
          {
            "name": "invitationId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Invitation ID to cancel"
          }
        ],
        "responses": {
          "200": {
            "description": "Invitation cancelled successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invitation_cancelled": {
                    "summary": "Invitation Cancelled",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "invitation_cancelled": true,
                        "invitation_id": "invitation_123456789"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to cancel invitations"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires organization:admin or organization:manage permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Invitation doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invitation_not_found": {
                    "summary": "Invitation not found",
                    "value": {
                      "status": 404,
                      "message": "Invitation not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVITATION_NOT_FOUND",
                          "message": "Invitation does not exist or has already been processed"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/organizations/{id}/roles": {
      "get": {
        "tags": ["Organizations"],
        "summary": "Get Organization Roles",
        "description": "Retrieve all roles in the organization. Requires organization membership.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Roles retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "roles_list": {
                    "summary": "Organization Roles",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": [
                        {
                          "id": "role_admin",
                          "name": "Admin",
                          "description": "Full administrative access to the organization",
                          "permissions": [
                            "organization:admin",
                            "organization:manage",
                            "organization:read"
                          ],
                          "is_default": false,
                          "member_count": 2,
                          "created_at": "2024-01-01T00:00:00Z"
                        },
                        {
                          "id": "role_manager",
                          "name": "Manager",
                          "description": "Can manage organization members and settings",
                          "permissions": [
                            "organization:manage",
                            "organization:read"
                          ],
                          "is_default": false,
                          "member_count": 5,
                          "created_at": "2024-01-01T00:00:00Z"
                        },
                        {
                          "id": "role_member",
                          "name": "Member",
                          "description": "Basic organization member access",
                          "permissions": ["organization:read"],
                          "is_default": true,
                          "member_count": 18,
                          "created_at": "2024-01-01T00:00:00Z"
                        }
                      ],
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to view roles"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Not a member",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_member": {
                    "summary": "Not an organization member",
                    "value": {
                      "status": 403,
                      "message": "Not a member of this organization",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "NOT_MEMBER",
                          "message": "Must be a member of the organization to view roles"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Organization doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "organization_not_found": {
                    "summary": "Organization not found",
                    "value": {
                      "status": 404,
                      "message": "Organization not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ORGANIZATION_NOT_FOUND",
                          "message": "Organization does not exist"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Organizations"],
        "summary": "Create Organization Role",
        "description": "Create a new role in the organization. Requires organization admin permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Role name"
                  },
                  "description": {
                    "type": "string",
                    "description": "Role description"
                  },
                  "permissions": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Array of permission strings"
                  }
                },
                "required": ["name", "permissions"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Role created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "role_created": {
                    "summary": "Role Created",
                    "value": {
                      "status": 201,
                      "message": "",
                      "data": {
                        "role": {
                          "id": "role_developer",
                          "name": "Developer",
                          "description": "Access to development resources",
                          "permissions": [
                            "organization:read",
                            "workspace:manage"
                          ],
                          "is_default": false,
                          "member_count": 0,
                          "created_at": "2024-01-15T19:30:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "role_exists": {
                    "summary": "Role name already exists",
                    "value": {
                      "status": 400,
                      "message": "Role with this name already exists",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ROLE_EXISTS",
                          "message": "A role with this name already exists in the organization"
                        }
                      ]
                    }
                  },
                  "invalid_permissions": {
                    "summary": "Invalid permissions specified",
                    "value": {
                      "status": 400,
                      "message": "Invalid permissions specified",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_PERMISSIONS",
                          "message": "One or more permissions are not valid"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to create roles"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires organization:admin permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/organizations/{id}/roles/{roleId}": {
      "delete": {
        "tags": ["Organizations"],
        "summary": "Delete Organization Role",
        "description": "Delete a role from the organization. Cannot delete roles that are currently assigned to members. Requires organization admin permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          },
          {
            "name": "roleId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Role ID to delete"
          }
        ],
        "responses": {
          "200": {
            "description": "Role deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "role_deleted": {
                    "summary": "Role Deleted",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "role_deleted": true,
                        "role_id": "role_developer"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "role_in_use": {
                    "summary": "Role is assigned to members",
                    "value": {
                      "status": 400,
                      "message": "Cannot delete role that is assigned to members",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ROLE_IN_USE",
                          "message": "This role is currently assigned to 5 members"
                        }
                      ]
                    }
                  },
                  "default_role": {
                    "summary": "Cannot delete default role",
                    "value": {
                      "status": 400,
                      "message": "Cannot delete the default role",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "CANNOT_DELETE_DEFAULT_ROLE",
                          "message": "The default role cannot be deleted"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to delete roles"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires organization:admin permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Role doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "role_not_found": {
                    "summary": "Role not found",
                    "value": {
                      "status": 404,
                      "message": "Role not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ROLE_NOT_FOUND",
                          "message": "Role does not exist in this organization"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/organizations/{id}/domains": {
      "get": {
        "tags": ["Organizations"],
        "summary": "Get Organization Domains",
        "description": "Retrieve all domains associated with the organization. Requires organization membership.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Domains retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "domains_list": {
                    "summary": "Organization Domains",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": [
                        {
                          "id": "domain_123456789",
                          "domain": "acme.com",
                          "is_verified": true,
                          "verification_token": null,
                          "verified_at": "2024-01-10T15:30:00Z",
                          "created_at": "2024-01-10T15:00:00Z"
                        },
                        {
                          "id": "domain_987654321",
                          "domain": "staging.acme.com",
                          "is_verified": false,
                          "verification_token": "wacht_verify_abc123def456",
                          "verified_at": null,
                          "created_at": "2024-01-15T10:00:00Z"
                        }
                      ],
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  },
                  "no_domains": {
                    "summary": "No domains configured",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": [],
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to view domains"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Not a member",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_member": {
                    "summary": "Not an organization member",
                    "value": {
                      "status": 403,
                      "message": "Not a member of this organization",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "NOT_MEMBER",
                          "message": "Must be a member of the organization to view domains"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Organization doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "organization_not_found": {
                    "summary": "Organization not found",
                    "value": {
                      "status": 404,
                      "message": "Organization not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ORGANIZATION_NOT_FOUND",
                          "message": "Organization does not exist"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Organizations"],
        "summary": "Add Organization Domain",
        "description": "Add a new domain to the organization for email verification purposes. Requires organization admin or manage permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "domain": {
                    "type": "string",
                    "description": "Domain name to add (e.g., acme.com)"
                  }
                },
                "required": ["domain"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Domain added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "domain_added": {
                    "summary": "Domain Added",
                    "value": {
                      "status": 201,
                      "message": "",
                      "data": {
                        "domain": {
                          "id": "domain_123456789",
                          "domain": "newdomain.com",
                          "is_verified": false,
                          "verification_token": "wacht_verify_xyz789abc123",
                          "verified_at": null,
                          "created_at": "2024-01-15T19:30:00Z"
                        },
                        "verification_instructions": {
                          "dns_record": {
                            "type": "TXT",
                            "name": "_wacht_verification",
                            "value": "wacht_verify_xyz789abc123"
                          },
                          "instructions": "Add this TXT record to your DNS settings and then use the verify endpoint to complete verification."
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_domain": {
                    "summary": "Invalid domain format",
                    "value": {
                      "status": 400,
                      "message": "Invalid domain format",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_DOMAIN",
                          "message": "Please provide a valid domain name"
                        }
                      ]
                    }
                  },
                  "domain_exists": {
                    "summary": "Domain already exists",
                    "value": {
                      "status": 400,
                      "message": "Domain already exists in this organization",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "DOMAIN_EXISTS",
                          "message": "This domain is already associated with the organization"
                        }
                      ]
                    }
                  },
                  "domain_claimed": {
                    "summary": "Domain claimed by another organization",
                    "value": {
                      "status": 400,
                      "message": "Domain is already claimed by another organization",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "DOMAIN_CLAIMED",
                          "message": "This domain is already verified by another organization"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to add domains"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires organization:admin or organization:manage permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/organizations/{id}/domains/{domainId}/verify": {
      "post": {
        "tags": ["Organizations"],
        "summary": "Verify Organization Domain",
        "description": "Verify domain ownership by checking DNS TXT records. Requires organization admin or manage permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          },
          {
            "name": "domainId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Domain ID to verify"
          }
        ],
        "responses": {
          "200": {
            "description": "Domain verified successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "domain_verified": {
                    "summary": "Domain Verified",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "domain": {
                          "id": "domain_123456789",
                          "domain": "acme.com",
                          "is_verified": true,
                          "verification_token": null,
                          "verified_at": "2024-01-15T19:30:00Z",
                          "created_at": "2024-01-15T19:00:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "verification_failed": {
                    "summary": "DNS verification failed",
                    "value": {
                      "status": 400,
                      "message": "Domain verification failed",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "VERIFICATION_FAILED",
                          "message": "Could not find the verification TXT record in DNS"
                        }
                      ]
                    }
                  },
                  "already_verified": {
                    "summary": "Domain already verified",
                    "value": {
                      "status": 400,
                      "message": "Domain is already verified",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ALREADY_VERIFIED",
                          "message": "This domain has already been verified"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to verify domains"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires organization:admin or organization:manage permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Domain doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "domain_not_found": {
                    "summary": "Domain not found",
                    "value": {
                      "status": 404,
                      "message": "Domain not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "DOMAIN_NOT_FOUND",
                          "message": "Domain does not exist in this organization"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/organizations/{id}/domains/{domainId}": {
      "delete": {
        "tags": ["Organizations"],
        "summary": "Delete Organization Domain",
        "description": "Remove a domain from the organization. Requires organization admin or manage permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          },
          {
            "name": "domainId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Domain ID to delete"
          }
        ],
        "responses": {
          "200": {
            "description": "Domain deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "domain_deleted": {
                    "summary": "Domain Deleted",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "domain_deleted": true,
                        "domain_id": "domain_123456789"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to delete domains"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires organization:admin or organization:manage permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Domain doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "domain_not_found": {
                    "summary": "Domain not found",
                    "value": {
                      "status": 404,
                      "message": "Domain not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "DOMAIN_NOT_FOUND",
                          "message": "Domain does not exist in this organization"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/organizations/{id}/billing-addresses": {
      "get": {
        "tags": ["Organizations"],
        "summary": "Get Organization Billing Addresses",
        "description": "Retrieve all billing addresses for the organization. Requires organization admin or manage permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Billing addresses retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "billing_addresses_list": {
                    "summary": "Organization Billing Addresses",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": [
                        {
                          "id": "billing_123456789",
                          "name": "Acme Corp Headquarters",
                          "company": "Acme Corporation",
                          "address_line_1": "123 Main Street",
                          "address_line_2": "Suite 500",
                          "city": "San Francisco",
                          "state": "CA",
                          "postal_code": "94105",
                          "country": "US",
                          "is_default": true,
                          "created_at": "2024-01-01T00:00:00Z",
                          "updated_at": "2024-01-01T00:00:00Z"
                        },
                        {
                          "id": "billing_987654321",
                          "name": "Acme Corp Billing Department",
                          "company": "Acme Corporation",
                          "address_line_1": "456 Business Ave",
                          "address_line_2": null,
                          "city": "New York",
                          "state": "NY",
                          "postal_code": "10001",
                          "country": "US",
                          "is_default": false,
                          "created_at": "2024-01-10T15:30:00Z",
                          "updated_at": "2024-01-10T15:30:00Z"
                        }
                      ],
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  },
                  "no_billing_addresses": {
                    "summary": "No billing addresses",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": [],
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to view billing addresses"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires organization:admin or organization:manage permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Organization doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "organization_not_found": {
                    "summary": "Organization not found",
                    "value": {
                      "status": 404,
                      "message": "Organization not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ORGANIZATION_NOT_FOUND",
                          "message": "Organization does not exist"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Organizations"],
        "summary": "Add Organization Billing Address",
        "description": "Add a new billing address to the organization. Requires organization admin or manage permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Display name for the billing address"
                  },
                  "company": {
                    "type": "string",
                    "description": "Company name"
                  },
                  "address_line_1": {
                    "type": "string",
                    "description": "Primary address line"
                  },
                  "address_line_2": {
                    "type": "string",
                    "description": "Secondary address line (optional)"
                  },
                  "city": {
                    "type": "string",
                    "description": "City"
                  },
                  "state": {
                    "type": "string",
                    "description": "State or province"
                  },
                  "postal_code": {
                    "type": "string",
                    "description": "Postal or ZIP code"
                  },
                  "country": {
                    "type": "string",
                    "description": "Country code (ISO 3166-1 alpha-2)"
                  },
                  "is_default": {
                    "type": "boolean",
                    "description": "Whether this should be the default billing address"
                  }
                },
                "required": [
                  "name",
                  "company",
                  "address_line_1",
                  "city",
                  "state",
                  "postal_code",
                  "country"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Billing address added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "billing_address_added": {
                    "summary": "Billing Address Added",
                    "value": {
                      "status": 201,
                      "message": "",
                      "data": {
                        "billing_address": {
                          "id": "billing_123456789",
                          "name": "New Office Location",
                          "company": "Acme Corporation",
                          "address_line_1": "789 New Street",
                          "address_line_2": "Floor 3",
                          "city": "Los Angeles",
                          "state": "CA",
                          "postal_code": "90210",
                          "country": "US",
                          "is_default": false,
                          "created_at": "2024-01-15T19:30:00Z",
                          "updated_at": "2024-01-15T19:30:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_address": {
                    "summary": "Invalid address format",
                    "value": {
                      "status": 400,
                      "message": "Invalid address information",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_ADDRESS",
                          "message": "Please provide valid address information"
                        }
                      ]
                    }
                  },
                  "invalid_country": {
                    "summary": "Invalid country code",
                    "value": {
                      "status": 400,
                      "message": "Invalid country code",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_COUNTRY",
                          "message": "Country code must be a valid ISO 3166-1 alpha-2 code"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to add billing addresses"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires organization:admin or organization:manage permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/organizations/{id}/billing-addresses/{billingAddressId}": {
      "put": {
        "tags": ["Organizations"],
        "summary": "Update Organization Billing Address",
        "description": "Update an existing billing address. Requires organization admin or manage permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          },
          {
            "name": "billingAddressId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Billing Address ID to update"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Display name for the billing address"
                  },
                  "company": {
                    "type": "string",
                    "description": "Company name"
                  },
                  "address_line_1": {
                    "type": "string",
                    "description": "Primary address line"
                  },
                  "address_line_2": {
                    "type": "string",
                    "description": "Secondary address line (optional)"
                  },
                  "city": {
                    "type": "string",
                    "description": "City"
                  },
                  "state": {
                    "type": "string",
                    "description": "State or province"
                  },
                  "postal_code": {
                    "type": "string",
                    "description": "Postal or ZIP code"
                  },
                  "country": {
                    "type": "string",
                    "description": "Country code (ISO 3166-1 alpha-2)"
                  },
                  "is_default": {
                    "type": "boolean",
                    "description": "Whether this should be the default billing address"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Billing address updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "billing_address_updated": {
                    "summary": "Billing Address Updated",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "billing_address": {
                          "id": "billing_123456789",
                          "name": "Updated Office Location",
                          "company": "Acme Corporation Ltd",
                          "address_line_1": "789 Updated Street",
                          "address_line_2": "Floor 5",
                          "city": "Los Angeles",
                          "state": "CA",
                          "postal_code": "90210",
                          "country": "US",
                          "is_default": true,
                          "created_at": "2024-01-15T19:30:00Z",
                          "updated_at": "2024-01-15T20:00:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "invalid_address": {
                    "summary": "Invalid address format",
                    "value": {
                      "status": 400,
                      "message": "Invalid address information",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_ADDRESS",
                          "message": "Please provide valid address information"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to update billing addresses"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires organization:admin or organization:manage permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Billing address doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "billing_address_not_found": {
                    "summary": "Billing address not found",
                    "value": {
                      "status": 404,
                      "message": "Billing address not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "BILLING_ADDRESS_NOT_FOUND",
                          "message": "Billing address does not exist in this organization"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Organizations"],
        "summary": "Delete Organization Billing Address",
        "description": "Remove a billing address from the organization. Cannot delete the default billing address if it's the only one. Requires organization admin or manage permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Organization ID"
          },
          {
            "name": "billingAddressId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Billing Address ID to delete"
          }
        ],
        "responses": {
          "200": {
            "description": "Billing address deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "billing_address_deleted": {
                    "summary": "Billing Address Deleted",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "billing_address_deleted": true,
                        "billing_address_id": "billing_123456789"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "cannot_delete_last": {
                    "summary": "Cannot delete the only billing address",
                    "value": {
                      "status": 400,
                      "message": "Cannot delete the only billing address",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "CANNOT_DELETE_LAST_BILLING_ADDRESS",
                          "message": "Organization must have at least one billing address"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to delete billing addresses"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires organization:admin or organization:manage permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Billing address doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "billing_address_not_found": {
                    "summary": "Billing address not found",
                    "value": {
                      "status": 404,
                      "message": "Billing address not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "BILLING_ADDRESS_NOT_FOUND",
                          "message": "Billing address does not exist in this organization"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/workspaces": {
      "post": {
        "tags": ["Workspaces"],
        "summary": "Create Workspace",
        "description": "Create a new workspace within an organization. Requires organization membership and workspace creation permissions.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Workspace name"
                  },
                  "description": {
                    "type": "string",
                    "description": "Workspace description"
                  },
                  "organization_id": {
                    "type": "string",
                    "description": "ID of the organization to create workspace in"
                  }
                },
                "required": ["name", "organization_id"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Workspace created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "workspace_created": {
                    "summary": "Workspace Created",
                    "value": {
                      "status": 201,
                      "message": "",
                      "data": {
                        "workspace": {
                          "id": "workspace_123456789",
                          "name": "Development Team",
                          "description": "Workspace for the development team",
                          "organization": {
                            "id": "org_456789123",
                            "name": "Acme Corporation",
                            "slug": "acme-corp"
                          },
                          "members_count": 1,
                          "created_at": "2024-01-15T19:30:00Z",
                          "updated_at": "2024-01-15T19:30:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "workspace_exists": {
                    "summary": "Workspace name already exists",
                    "value": {
                      "status": 400,
                      "message": "Workspace with this name already exists",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "WORKSPACE_EXISTS",
                          "message": "A workspace with this name already exists in the organization"
                        }
                      ]
                    }
                  },
                  "invalid_name": {
                    "summary": "Invalid workspace name",
                    "value": {
                      "status": 400,
                      "message": "Invalid workspace name",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_NAME",
                          "message": "Workspace name must be between 1 and 100 characters"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to create workspaces"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires workspace creation permission in this organization"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Organization doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "organization_not_found": {
                    "summary": "Organization not found",
                    "value": {
                      "status": 404,
                      "message": "Organization not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ORGANIZATION_NOT_FOUND",
                          "message": "Organization does not exist"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/{id}": {
      "get": {
        "tags": ["Workspaces"],
        "summary": "Get Workspace",
        "description": "Retrieve workspace details including members and settings. Requires workspace membership.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Workspace ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Workspace retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "workspace_details": {
                    "summary": "Workspace Details",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "workspace": {
                          "id": "workspace_123456789",
                          "name": "Development Team",
                          "description": "Workspace for the development team",
                          "organization": {
                            "id": "org_456789123",
                            "name": "Acme Corporation",
                            "slug": "acme-corp"
                          },
                          "members": [
                            {
                              "id": "member_123456789",
                              "user": {
                                "id": "user_456789123",
                                "first_name": "John",
                                "last_name": "Doe",
                                "email": "john.doe@acme.com",
                                "profile_image_url": "https://cdn.acme.com/avatars/john.jpg"
                              },
                              "role": "admin",
                              "joined_at": "2024-01-15T19:30:00Z"
                            },
                            {
                              "id": "member_987654321",
                              "user": {
                                "id": "user_789123456",
                                "first_name": "Jane",
                                "last_name": "Smith",
                                "email": "jane.smith@acme.com",
                                "profile_image_url": "https://cdn.acme.com/avatars/jane.jpg"
                              },
                              "role": "member",
                              "joined_at": "2024-01-16T10:15:00Z"
                            }
                          ],
                          "members_count": 2,
                          "created_at": "2024-01-15T19:30:00Z",
                          "updated_at": "2024-01-15T19:30:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to view workspaces"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Not a workspace member",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_member": {
                    "summary": "Not a workspace member",
                    "value": {
                      "status": 403,
                      "message": "Not a member of this workspace",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "NOT_WORKSPACE_MEMBER",
                          "message": "Must be a member of the workspace to view details"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Workspace doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "workspace_not_found": {
                    "summary": "Workspace not found",
                    "value": {
                      "status": 404,
                      "message": "Workspace not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "WORKSPACE_NOT_FOUND",
                          "message": "Workspace does not exist"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Workspaces"],
        "summary": "Update Workspace",
        "description": "Update workspace details such as name and description. Requires workspace admin permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Workspace ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Workspace name"
                  },
                  "description": {
                    "type": "string",
                    "description": "Workspace description"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Workspace updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "workspace_updated": {
                    "summary": "Workspace Updated",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "workspace": {
                          "id": "workspace_123456789",
                          "name": "Updated Development Team",
                          "description": "Updated workspace description for the development team",
                          "organization": {
                            "id": "org_456789123",
                            "name": "Acme Corporation",
                            "slug": "acme-corp"
                          },
                          "members_count": 2,
                          "created_at": "2024-01-15T19:30:00Z",
                          "updated_at": "2024-01-15T20:00:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "workspace_exists": {
                    "summary": "Workspace name already exists",
                    "value": {
                      "status": 400,
                      "message": "Workspace with this name already exists",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "WORKSPACE_EXISTS",
                          "message": "A workspace with this name already exists in the organization"
                        }
                      ]
                    }
                  },
                  "invalid_name": {
                    "summary": "Invalid workspace name",
                    "value": {
                      "status": 400,
                      "message": "Invalid workspace name",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_NAME",
                          "message": "Workspace name must be between 1 and 100 characters"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to update workspaces"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires workspace admin permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Workspace doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "workspace_not_found": {
                    "summary": "Workspace not found",
                    "value": {
                      "status": 404,
                      "message": "Workspace not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "WORKSPACE_NOT_FOUND",
                          "message": "Workspace does not exist"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Workspaces"],
        "summary": "Delete Workspace",
        "description": "Delete a workspace and remove all its members. Requires workspace admin permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Workspace ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Workspace deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "workspace_deleted": {
                    "summary": "Workspace Deleted",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "workspace_deleted": true,
                        "workspace_id": "workspace_123456789"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to delete workspaces"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires workspace admin permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Workspace doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "workspace_not_found": {
                    "summary": "Workspace not found",
                    "value": {
                      "status": 404,
                      "message": "Workspace not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "WORKSPACE_NOT_FOUND",
                          "message": "Workspace does not exist"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/{id}/members": {
      "post": {
        "tags": ["Workspaces"],
        "summary": "Invite Member to Workspace",
        "description": "Add a member to the workspace by user ID or email. Requires workspace admin permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Workspace ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "user_id": {
                    "type": "string",
                    "description": "ID of the user to invite (alternative to email)"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email of the user to invite (alternative to user_id)"
                  },
                  "role": {
                    "type": "string",
                    "enum": ["admin", "member"],
                    "description": "Role to assign to the member",
                    "default": "member"
                  }
                },
                "oneOf": [
                  { "required": ["user_id"] },
                  { "required": ["email"] }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Member invited successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "member_added_existing_user": {
                    "summary": "Existing User Added",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "member": {
                          "id": "member_987654321",
                          "user": {
                            "id": "user_789123456",
                            "first_name": "Jane",
                            "last_name": "Smith",
                            "email": "jane.smith@acme.com",
                            "profile_image_url": "https://cdn.acme.com/avatars/jane.jpg"
                          },
                          "role": "member",
                          "joined_at": "2024-01-15T19:30:00Z"
                        }
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  },
                  "invitation_sent": {
                    "summary": "Invitation Sent to New User",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "invitation_sent": true,
                        "email": "newuser@acme.com",
                        "role": "member",
                        "expires_at": "2024-01-22T19:30:00Z"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "already_member": {
                    "summary": "User already a member",
                    "value": {
                      "status": 400,
                      "message": "User is already a member of this workspace",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "ALREADY_MEMBER",
                          "message": "This user is already a member of the workspace"
                        }
                      ]
                    }
                  },
                  "invalid_email": {
                    "summary": "Invalid email format",
                    "value": {
                      "status": 400,
                      "message": "Invalid email format",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INVALID_EMAIL",
                          "message": "Please provide a valid email address"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to invite members"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires workspace admin permission"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Workspace or user doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "workspace_not_found": {
                    "summary": "Workspace not found",
                    "value": {
                      "status": 404,
                      "message": "Workspace not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "WORKSPACE_NOT_FOUND",
                          "message": "Workspace does not exist"
                        }
                      ]
                    }
                  },
                  "user_not_found": {
                    "summary": "User not found",
                    "value": {
                      "status": 404,
                      "message": "User not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "USER_NOT_FOUND",
                          "message": "User with this ID does not exist"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/{id}/members/{memberId}": {
      "delete": {
        "tags": ["Workspaces"],
        "summary": "Remove Member from Workspace",
        "description": "Remove a member from the workspace. Requires workspace admin permissions or being the member themselves.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Workspace ID"
          },
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Member ID to remove"
          }
        ],
        "responses": {
          "200": {
            "description": "Member removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "member_removed": {
                    "summary": "Member Removed",
                    "value": {
                      "status": 200,
                      "message": "",
                      "data": {
                        "member_removed": true,
                        "member_id": "member_987654321"
                      },
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": []
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "cannot_remove_last_admin": {
                    "summary": "Cannot remove last admin",
                    "value": {
                      "status": 400,
                      "message": "Cannot remove the last admin from workspace",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "CANNOT_REMOVE_LAST_ADMIN",
                          "message": "Workspace must have at least one admin"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Not signed in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "not_authenticated": {
                    "summary": "Not signed in",
                    "value": {
                      "status": 401,
                      "message": "Not authenticated",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [],
                        "signup_attempts": [],
                        "active_signin": null
                      },
                      "errors": [
                        {
                          "code": "NOT_AUTHENTICATED",
                          "message": "User must be signed in to remove members"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "insufficient_permissions": {
                    "summary": "Insufficient permissions",
                    "value": {
                      "status": 403,
                      "message": "Insufficient permissions",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "INSUFFICIENT_PERMISSIONS",
                          "message": "Requires workspace admin permission or being the member themselves"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - Member doesn't exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StandardResponse"
                },
                "examples": {
                  "member_not_found": {
                    "summary": "Member not found",
                    "value": {
                      "status": 404,
                      "message": "Member not found",
                      "data": null,
                      "session": {
                        "signin_attempts": [],
                        "signins": [
                          {
                            "id": "signin_987654321",
                            "user_id": "user_456789123",
                            "created_at": "2024-01-01T12:00:00Z"
                          }
                        ],
                        "signup_attempts": [],
                        "active_signin": {
                          "id": "signin_987654321",
                          "user_id": "user_456789123",
                          "created_at": "2024-01-01T12:00:00Z"
                        }
                      },
                      "errors": [
                        {
                          "code": "MEMBER_NOT_FOUND",
                          "message": "Member does not exist in this workspace"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "cookieAuth": {
        "type": "apiKey",
        "in": "cookie",
        "name": "__session",
        "description": "Session cookie authentication for production deployments. The session token is automatically set as an HTTP-only, secure cookie."
      },
      "queryAuth": {
        "type": "apiKey",
        "in": "query",
        "name": "__dev_session__",
        "description": "Session query parameter authentication for staging/development deployments. The session token is passed as a query parameter and also returned in the X-Development-Session header."
      },
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT authentication via Authorization header. Use tokens from /session/token endpoint."
      }
    },
    "schemas": {
      "StandardResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "integer",
            "description": "HTTP status code"
          },
          "message": {
            "type": "string",
            "description": "Response message (empty for success)"
          },
          "data": {
            "description": "Response data (can be any type)"
          },
          "session": {
            "$ref": "#/components/schemas/Session"
          },
          "errors": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Error"
            },
            "description": "Array of error objects (empty for success)"
          }
        },
        "required": ["status", "message", "data", "session", "errors"]
      },
      "SignInRequest": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "description": "Username for username-based authentication"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email address for email-based authentication"
          },
          "phone": {
            "type": "string",
            "description": "Phone number for phone-based authentication"
          },
          "password": {
            "type": "string",
            "description": "Password for credential-based authentication"
          },
          "strategy": {
            "type": "string",
            "enum": [
              "plain_email",
              "plain_username",
              "phone_otp",
              "email_otp",
              "magic_link",
              "passkey"
            ],
            "description": "Authentication strategy to use"
          }
        },
        "required": ["strategy"]
      },
      "SignUpRequest": {
        "type": "object",
        "properties": {
          "first_name": {
            "type": "string",
            "description": "User's first name"
          },
          "last_name": {
            "type": "string",
            "description": "User's last name"
          },
          "username": {
            "type": "string",
            "description": "Unique username"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email address"
          },
          "phone_number": {
            "type": "string",
            "description": "Phone number with country code"
          },
          "password": {
            "type": "string",
            "minLength": 6,
            "maxLength": 125,
            "description": "User's password (6-125 characters, must contain number and symbol)"
          }
        },
        "required": ["password"]
      },
      "Session": {
        "type": "object",
        "properties": {
          "signin_attempts": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SignInAttempt"
            }
          },
          "signins": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SignIn"
            }
          },
          "signup_attempts": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SignUpAttempt"
            }
          },
          "active_signin": {
            "allOf": [
              {
                "$ref": "#/components/schemas/SignIn"
              }
            ],
            "nullable": true
          }
        }
      },
      "SignInAttempt": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier for the sign-in attempt"
          },
          "method": {
            "type": "string",
            "enum": [
              "plain_email",
              "plain_username",
              "phone_otp",
              "email_otp",
              "magic_link",
              "sso",
              "passkey"
            ]
          },
          "current_step": {
            "type": "string",
            "enum": [
              "verify_email",
              "verify_email_otp",
              "verify_email_link",
              "verify_second_factor",
              "verify_phone",
              "verify_phone_otp"
            ]
          },
          "completed": {
            "type": "boolean"
          },
          "requires_completion": {
            "type": "boolean",
            "description": "Whether profile completion is required"
          },
          "missing_fields": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Fields that need to be completed"
          },
          "required_fields": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "All required fields for this deployment"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "SignUpAttempt": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "username": {
            "type": "string"
          },
          "current_step": {
            "type": "string",
            "enum": ["verify_email", "verify_phone"]
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "SignIn": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "user_id": {
            "type": "string"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "first_name": {
            "type": "string"
          },
          "last_name": {
            "type": "string"
          },
          "username": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "image_url": {
            "type": "string"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "Error code"
          },
          "message": {
            "type": "string",
            "description": "Human-readable error message"
          }
        },
        "required": ["code", "message"]
      },
      "DeploymentUISettings": {
        "type": "object",
        "properties": {
          "deployment_id": {
            "type": "integer",
            "format": "int64"
          },
          "app_name": {
            "type": "string",
            "description": "Application name displayed in UI"
          },
          "privacy_policy_url": {
            "type": "string",
            "description": "Privacy policy URL"
          },
          "tos_page_url": {
            "type": "string",
            "description": "Terms of service URL"
          },
          "sign_in_page_url": {
            "type": "string",
            "description": "Sign-in page URL"
          },
          "sign_up_page_url": {
            "type": "string",
            "description": "Sign-up page URL"
          },
          "waitlist_page_url": {
            "type": "string",
            "description": "Waitlist page URL"
          },
          "support_page_url": {
            "type": "string",
            "description": "Support page URL"
          },
          "after_logo_click_url": {
            "type": "string",
            "description": "URL to redirect after logo click"
          },
          "user_profile_url": {
            "type": "string",
            "description": "User profile page URL"
          },
          "organization_profile_url": {
            "type": "string",
            "description": "Organization profile page URL"
          },
          "create_organization_url": {
            "type": "string",
            "description": "Create organization page URL"
          },
          "after_sign_out_one_page_url": {
            "type": "string",
            "description": "URL after signing out one session"
          },
          "after_sign_out_all_page_url": {
            "type": "string",
            "description": "URL after signing out all sessions"
          },
          "after_signup_redirect_url": {
            "type": "string",
            "description": "URL to redirect after successful signup"
          },
          "after_signin_redirect_url": {
            "type": "string",
            "description": "URL to redirect after successful signin"
          },
          "after_create_organization_redirect_url": {
            "type": "string",
            "description": "URL to redirect after creating organization"
          },
          "favicon_image_url": {
            "type": "string",
            "description": "Favicon image URL"
          },
          "default_user_profile_image_url": {
            "type": "string",
            "description": "Default user profile image URL"
          },
          "default_organization_profile_image_url": {
            "type": "string",
            "description": "Default organization profile image URL"
          },
          "default_workspace_profile_image_url": {
            "type": "string",
            "description": "Default workspace profile image URL"
          },
          "use_initials_for_user_profile_image": {
            "type": "boolean",
            "description": "Whether to use initials for user profile images"
          },
          "use_initials_for_organization_profile_image": {
            "type": "boolean",
            "description": "Whether to use initials for organization profile images"
          },
          "logo_image_url": {
            "type": "string",
            "description": "Logo image URL"
          },
          "signup_terms_statement": {
            "type": "string",
            "description": "Terms statement shown on signup"
          },
          "signup_terms_statement_shown": {
            "type": "boolean",
            "description": "Whether to show terms statement on signup"
          },
          "light_mode_settings": {
            "$ref": "#/components/schemas/ThemeSettings"
          },
          "dark_mode_settings": {
            "$ref": "#/components/schemas/ThemeSettings"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ThemeSettings": {
        "type": "object",
        "properties": {
          "primary_color": {
            "type": "string",
            "description": "Primary color in hex format"
          },
          "background_color": {
            "type": "string",
            "description": "Background color in hex format"
          },
          "text_color": {
            "type": "string",
            "description": "Text color in hex format"
          }
        }
      }
    },
    "responses": {
      "DeploymentNotFound": {
        "description": "Deployment not found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/StandardResponse"
            },
            "examples": {
              "deployment_not_found": {
                "summary": "Invalid hostname",
                "value": {
                  "status": 404,
                  "message": "No deployment found for this hostname",
                  "data": null,
                  "session": {
                    "signin_attempts": [],
                    "signins": [],
                    "signup_attempts": [],
                    "active_signin": null
                  },
                  "errors": [
                    {
                      "code": "DEPLOYMENT_NOT_FOUND",
                      "message": "No deployment found for this hostname"
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "ValidationError": {
        "description": "Bad Request - Validation Error",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/StandardResponse"
            },
            "examples": {
              "missing_strategy": {
                "summary": "Missing strategy field",
                "value": {
                  "status": 400,
                  "message": "Field errors",
                  "data": null,
                  "session": {
                    "signin_attempts": [],
                    "signins": [],
                    "signup_attempts": [],
                    "active_signin": null
                  },
                  "errors": [
                    {
                      "code": "VALIDATION_ERROR",
                      "message": "Strategy is required"
                    }
                  ]
                }
              },
              "invalid_email": {
                "summary": "Invalid email format",
                "value": {
                  "status": 400,
                  "message": "Field errors",
                  "data": null,
                  "session": {
                    "signin_attempts": [],
                    "signins": [],
                    "signup_attempts": [],
                    "active_signin": null
                  },
                  "errors": [
                    {
                      "code": "VALIDATION_ERROR",
                      "message": "Invalid email format"
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "InvalidCredentials": {
        "description": "Unauthorized - Invalid Credentials",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/StandardResponse"
            },
            "examples": {
              "invalid_credentials": {
                "summary": "Wrong username/password",
                "value": {
                  "status": 401,
                  "message": "Invalid credentials",
                  "data": null,
                  "session": {
                    "signin_attempts": [],
                    "signins": [],
                    "signup_attempts": [],
                    "active_signin": null
                  },
                  "errors": [
                    {
                      "code": "INVALID_CREDENTIALS",
                      "message": "Invalid credentials. Please try again."
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "AccountDisabled": {
        "description": "Forbidden - Account Disabled",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/StandardResponse"
            },
            "examples": {
              "account_disabled": {
                "summary": "Account access restricted",
                "value": {
                  "status": 403,
                  "message": "Account access restricted",
                  "data": null,
                  "session": {
                    "signin_attempts": [],
                    "signins": [],
                    "signup_attempts": [],
                    "active_signin": null
                  },
                  "errors": [
                    {
                      "code": "USER_DISABLED",
                      "message": "Account access restricted. Please contact support."
                    }
                  ]
                }
              }
            }
          }
        }
      }
    }
  }
}
